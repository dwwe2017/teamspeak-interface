var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var h=c[b];if(h===a||Object.is(h,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var h=a[d];if(c.call(b,h,d,a))return{i:d,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
function moveUp(a){var c=$(a).attr("data-id"),b="0";$(a).parent().parent().hasClass("server")||(b=(b=$(a).parent().parent().attr("data-id"))&&"1"!==b?b:"0");var e=$(a).prev("li.channel, li.spacer").prev("li.channel, li.spacer").attr("data-id")||"0";$("#tsi-viewer-block").channelMove({id:id,sid:sid,cid:c,pid:b,order_id:e,sortable:$(a)},function(){$("#tsv-explorer").tsviewerRefresh(!1)})}
function moveUpClient(a){var c=$(a).parent().parent().prev("li.channel, li.spacer");c.length||(c=$(a).parent().parent().parent().parent().prev("li.channel, li.spacer"));(c=c.attr("data-id"))&&"0"!==c&&(a=$(a).attr("data-id"),$("#tsi-viewer-block").clientMove({id:id,sid:sid,cid:c,clid:a,sortable:$(this)},function(){$("#tsv-explorer").tsviewerRefresh(!1)}))}
function moveDown(a){var c=$(a).attr("data-id"),b="0";$(a).parent().parent().hasClass("server")||(b=(b=$(a).parent().parent().attr("data-id"))&&"1"!==b?b:"0");var e=$(a).next("li.channel, li.spacer").attr("data-id")||"0";$("#tsi-viewer-block").channelMove({id:id,sid:sid,cid:c,pid:b,order_id:e,sortable:$(a)},function(){$("#tsv-explorer").tsviewerRefresh(!1)})}
function moveDownClient(a){var c=$(a).parent().parent().next("li.channel, li.spacer");c.length||(c=$(a).parent().parent().parent().parent().next("li.channel, li.spacer"));(c=c.attr("data-id"))&&"0"!==c&&(a=$(a).attr("data-id"),$("#tsi-viewer-block").clientMove({id:id,sid:sid,cid:c,clid:a,sortable:$(this)},function(){$("#tsv-explorer").tsviewerRefresh(!1)}))}
$(document).ready(function(){function a(a){return(a=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?a.pop():""}function c(a,b,c){$(void 0===a?".tsv-icon":a).each(function(){$(this).attr("title")&&(void 0!==b&&$(this).addClass("with-tip tip-"+b),void 0!==c&&$(this).css("cursor",c))})}function b(){l.prop("checked")?($("#ajax-auto-refresh-button").hide(),$("#ajax-auto-refresh-loading").show(),setTimeout(function(){l.prop("checked")&&g.tsviewerRefresh(!1);b()},d)):($("#ajax-auto-refresh-button").show(),
$("#ajax-auto-refresh-loading").hide())}var e=source.tsi_imports_path,d=source.ts_explorer_auto_refresh_intervall,h=source.cookie_date_serverInterface,p=source.tsi_virtualserver_client_poke,q=source.tsi_virtualserver_kick,m=source.tsi_virtualserver_channel_move,k=source.tsi_virtualserver_client_move,r=source.tsi_virtualserver_channel_kick,t=source.tsi_virtualserver_complaints_create,u=source.tsi_virtualserver_ban_create,v=source.tsi_virtualserver_music_bot_create,w=source.tsi_virtualserver_channel_delete,
x=source.tsi_virtualserver_music_bot_delete,y=source.tsi_virtualserver_show_querys,n=source.tsi_virtualserver_basis,g=$("#tsv-explorer");n="tea"===n?"index.php?controller=ajax&action=serverViewData&content=real-time":"index.php?controller=ajax&action=serverViewData";var l=$("#ajax-auto-refresh");g.tsviewer({iconUrl:e+"/$icon.png",dataUrl:n+"&id="+id+"&sid="+sid,serverTip:"Clients: $users/$slots",channelTip:"Codec: $codec",clientTip:"Version: $version on $platform",onNode:function(a,b){var c=b.props,
z=b.first,A=b.last,e=b.parent.replace("ts3_s","").replace("ts3_c","");b=b.class;var d=c.id;$("#ajax-handle-properties");var f=$(a);f.attr("data-pid",e);if(b.includes("channel")||b.includes("spacer"))f.children(":first").bind("contextMenu",function(a,b){a.preventDefault();1===m&&(z||b.push({text:tjs.get("Move Up"),onclick:"moveUp('#"+f.attr("id")+"');",link:"javascript:void(0)",icon:"up"}),b.push({text:tjs.get("Move to .."),onclick:"modalChannelMove('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",
icon:"arrow_right"}));1===k&&b.push({text:tjs.get("Move here .."),onclick:"modalChannelMoveHere('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"group"});1===w&&b.push({text:tjs.get("Delete"),onclick:"channelDelete('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"delete"});1===v&&b.push({text:tjs.get("Create music bot"),onclick:"musicBotCreate('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"plus"});1!==m||A||b.push({text:tjs.get("Move Down"),onclick:"moveDown('#"+
f.attr("id")+"');",link:"javascript:void(0)",icon:"down"})});else if(b.includes("client")||b.includes("music")){var g=c.cldbid;f.attr("data-cldbid",g);b.includes("music")?f.bind("contextMenu",function(a,b){a.preventDefault();1===k&&(b.push({text:tjs.get("Previous Channel"),onclick:"moveUpClient('#"+f.attr("id")+"');",link:"javascript:void(0)",icon:"up"}),b.push({text:tjs.get("Move to .."),onclick:"modalClientMove('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"arrow_right"}));a=c.cldbid;
1===x&&b.push({text:tjs.get("Delete music bot"),onclick:"musicBotDelete('"+id+"', '"+sid+"', '"+a+"');",link:"javascript:void(0)",icon:"delete"});1===k&&b.push({text:tjs.get("Next Channel"),onclick:"moveDownClient('#"+f.attr("id")+"');",link:"javascript:void(0)",icon:"down"})}):f.children(":first").bind("contextMenu",function(a,b){a.preventDefault();1===k&&(b.push({text:tjs.get("Previous Channel"),onclick:"moveUpClient('#"+f.attr("id")+"');",link:"javascript:void(0)",icon:"up"}),b.push({text:tjs.get("Move to .."),
onclick:"modalClientMove('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"arrow_right"}));1===p&&b.push({text:tjs.get("Poke"),onclick:"clientPoke('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"alarm"});1===q&&b.push({text:tjs.get("Kick From Server"),onclick:"clientKick('"+id+"', '"+sid+"', '"+d+"', '1');",link:"javascript:void(0)",icon:"busy"});1===r&&b.push({text:tjs.get("Kick From Channel"),onclick:"clientKick('"+id+"', '"+sid+"', '"+d+"', '0');",link:"javascript:void(0)",
icon:"redup"});1===t&&b.push({text:tjs.get("Create Complaint"),onclick:"complaintCreate('"+id+"', '"+sid+"', '"+g+"', '1');",link:"javascript:void(0)",icon:"complaint"});1===u&&b.push({text:tjs.get("Create Bann"),onclick:"clientBan('"+id+"', '"+sid+"', '"+d+"');",link:"javascript:void(0)",icon:"ban"});1===k&&b.push({text:tjs.get("Next Channel"),onclick:"moveDownClient('#"+f.attr("id")+"');",link:"javascript:void(0)",icon:"down"})})}},onReady:function(b,d){$(function(){$("#tsv-explorer ul").sortable({opacity:.6,
grid:[5,5],connectWith:".tsv-container",forcePlaceholderSize:!1,start:function(){$(this);"true"===a("ts-explorer-auto-refresh-"+id+sid)&&l.prop("checked",!1)},stop:function(b,c){if("1"===c.item.attr("dropped"))$(this).sortable("cancel"),c.item.attr("dropped","0");else if(c.item.hasClass("channel")||c.item.hasClass("spacer"))if(1===m){b=c.item.attr("data-id");var d="0";c.item.parent().parent().hasClass("server")||(d=(d=c.item.parent().parent().attr("data-id"))&&"1"!==d?d:"0");c=c.item.prev("li").attr("data-id")||
"0";$("#tsi-viewer-block").channelMove({id:id,sid:sid,cid:b,pid:d,order_id:c,sortable:$(this)},function(){g.tsviewerRefresh(!1)})}else $(this).sortable("cancel");else c.item.hasClass("query")||(1===k?(b=c.item.prev().attr("data-id"))&&"0"!==b?(c=c.item.attr("data-id"),$("#tsi-viewer-block").clientMove({id:id,sid:sid,cid:b,clid:c,sortable:$(this)},function(){g.tsviewerRefresh(!1)})):$(this).sortable("cancel"):$(this).sortable("cancel"));"true"===a("ts-explorer-auto-refresh-"+id+sid)&&l.click()}});
$("ul, li").disableSelection()});var e=0;$(".tsv-node.channel, .tsv-node.spacer").droppable({axis:"x",tolerance:"intersect",greedy:!0,over:function(a,b){$(a.target||a.srcElement).addClass("ui-state-highlight")},out:function(a,b){$(a.target||a.srcElement).removeClass("ui-state-highlight")},drop:function(a,b){b.draggable.attr("dropped","1");e++;if(1<e)$(this).droppable("disable");else if(b.draggable.hasClass("client")||b.draggable.hasClass("music"))if(1===k){b=b.draggable.attr("data-id");var c=$(a.target||
a.srcElement).attr("data-id");$("#tsi-viewer-block").clientMove({id:id,sid:sid,cid:c,clid:b},function(){g.tsviewerRefresh(!1);e=0})}else $(this).droppable("disable");else if(!b.draggable.hasClass("query"))if(1===m){c=b.draggable.attr("data-id");a=a.target||a.srcElement;var d=$(a).attr("data-id"),f="0";$(a).find("li.tsv-node.channel").length?f=$(a).find("li.tsv-node.channel:first").attr("data-id"):$(a).find("li.tsv-node.spacer").length&&(f=$(a).find("li.tsv-node.spacer:first").attr("data-id"));d===
b.draggable.attr("data-pid")?(g.tsviewerRefresh(!1),e=0):f&&(f=f===c?"0":f,$("#tsi-viewer-block").channelMove({id:id,sid:sid,cid:c,pid:d,order_id:f},function(){g.tsviewerRefresh(!1);e=0}))}else $(this).droppable("disable")}});c(".tsv-icon","left");g.applyTemplateSetup();$(".tsv-node").css("cursor","pointer");y&&g.find(".query").hide()},onError:function(a){}});$(".tsi-viewer-refresh:first").click(function(a){a.preventDefault();g.tsviewerRefresh(void 0!==a.originalEvent)});b();setTimeout(function(){$("#tsv-container-ts3").height(1.01*
$("#tsv-container-ts3").height())},d+10);l.change(function(a){a.preventDefault();$(this).prop("checked")?(b(),document.cookie="ts-explorer-auto-refresh-"+id+sid+"=true; samesite=lax; expires="+h):document.cookie="ts-explorer-auto-refresh-"+id+sid+"=false; samesite=lax; expires="+h})});
