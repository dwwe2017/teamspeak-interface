var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,c){a instanceof String&&(a=String(a));for(var g=a.length,k=0;k<g;k++){var l=a[k];if(e.call(c,l,k,a))return{i:k,v:l}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,e,c,g){if(e){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var k=a[g];k in c||(c[k]={});c=c[k]}a=a[a.length-1];g=c[a];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$.fn.ajaxBotQueueSongRemove=function(){var a=source.cldbid_clientEdit;this.click(function(e){e.preventDefault();e={id:id,sid:sid,cldbid:a,loader:$(this).find("img").attr("src")};$(this).find("img").attr("src","images/arbo-loader.gif");$(this).musicBotQueueRem(e,function(){$(this).parent().parent().fadeOut("slow")})})};
$.fn.ajaxBotQueueAdd=function(){var a=source.cldbid_clientEdit;this.click(function(e){e.preventDefault();e={id:id,sid:sid,cldbid:a};$(this).musicBotQueueAdd(e,function(){var a=$(this);a.prev("input").val("");setTimeout(function(){a.parent().parent().prev("fieldset").children("ul").find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500)})})};
$.fn.ajaxBotQueueAddAgain=function(){var a=source.cldbid_clientEdit;this.click(function(e){e.preventDefault();e={id:id,sid:sid,cldbid:a,media:$(this).attr("id"),loader:$(this).find("img").attr("src")};$(this).find("img").attr("src","images/arbo-loader.gif");$(this).musicBotQueueAdd(e,function(){var a=$(this);setTimeout(function(){a.parent().parent().parent().prev("fieldset").find("#bot-player-queue-empty").hide();a.parent().parent().parent().parent().prev("fieldset").prev("fieldset").prev("fieldset").children("ul").find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},
2500)})})};
$(document).ready(function(){function a(a,f){return(Array(f).join("0")+a).slice(-f)}function e(){setTimeout(function(){var d=$("#bot-player-time-current").children("strong");if("0"===$("#bot-player-song-current").attr("data-state"))return!0;var f=d.html().split("/"),m=f[0];f=f[1];if(m>=f&&"00:00:00"!==f)return $(document).find(".ajax-bot-player-console[data-action=refresh]:first").trigger("click"),!0;var b=m.split(":");m=b[0];var p=b[1];b=b[2];59>b?b++:59>p?(b=0,p++):(p=b=0,m++);d.html(a(m,2)+":"+
a(p,2)+":"+a(b,2)+"/"+f);e()},1E3)}function c(){$.ajax({url:"index.php?controller=ajax&action=fetchChatLog&path="+encodeURIComponent(k),contentType:"application/json",dataType:"text",success:function(a){a=JSON.parse(a).result;h.html(nl2br(void 0===a.data?"":a.data));$("#ajax-chat-loader").hide()},error:function(){$("#ajax-chat-loader").hide()}});$("#ajax-chat-loader").show();h.parent().animate({scrollTop:h.height()},2E3);var a=n;a.prop("checked")&&!a.prop("disabled")&&setTimeout(function(){c()},2E3)}
var g=source.cldbid_clientEdit,k=source.path_chatlog_clientEdit;parent.$("#submitBtn").disableBt();parent.$("#resetBtn").disableBt();$(this).find("#ajax-bot-queue-add").ajaxBotQueueAdd();$(this).find(".ajax-bot-queue-add-again").ajaxBotQueueAddAgain();$(this).find(".ajax-bot-queue-song-remove").ajaxBotQueueSongRemove();$(".ajax-bot-player-console").click(function(a){a.preventDefault();var f=$(this).parent().parent().parent();"refresh"===$(this).attr("data-action")&&($("#bot-player-song-current").attr("data-state",
"0"),$("#bot-player-time-current").children("strong").html('<img src="images/arbo-loader.gif" style="width: 14px; height: 14px; vertical-align: middle;"> Loading...'));a={id:id,sid:sid,cldbid:g};$(this).musicBotPlayerAction(a,function(){var a=this.response,b=a.current,d=b.action,c=b.state,g=a.queue;a=a.played;if("0"===d&&0!==c)$("#bot-player-play").show(),$("#bot-player-pause").hide(),$("#bot-player-time-current").children("strong").html("00:00:00/00:00:00"),setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},
2500);else if("2"===d&&0!==c)$("#bot-player-play").show(),$("#bot-player-pause").hide(),$("#bot-player-song-current").attr("data-state","0"),setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500);else if("1"===d&&0!==c)$("#bot-player-play").hide(),$("#bot-player-pause").show(),$("#bot-player-song-current").attr("data-state","1"),setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500);else if("3"===d&&0!==
c)setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500);else if("4"===d)setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500);else if("refresh"===d){d=$("#bot-player-song-current");c=$("#bot-player-play");var h=$("#bot-player-pause");if(b.state&&""!==b.state)switch(b.state){case 0:c.show();h.hide();d.attr("data-state","0");break;case 1:c.show();h.hide();d.attr("data-state","0");break;case 2:c.hide();h.show();
d.attr("data-state","1");break;case 3:c.show();h.hide();d.attr("data-state","0");break;case 4:c.show(),h.hide(),d.attr("data-state","0")}b.title&&""!==b.title?d.html(b.title):(d.attr("data-state","0"),d.html(tjs.get("No title selected")),$("#bot-player-queue-empty").show());b.replay&&b.max&&($("#bot-player-time-current").children("strong").html(b.replay+"/"+b.max),e());if(g){var k=f.next("fieldset").next("fieldset").children("ul");k.html("");$.each(g,function(a,d){k.append(d).find(".ajax-bot-queue-song-remove:visible:last").ajaxBotQueueSongRemove()})}else f.next("fieldset").next("fieldset").children("ul").html('<li class="icon-error"><span>'+
tjs.get("No songs in the queue")+"</span></li>");if(a){var l=f.next("fieldset").next("fieldset").next("fieldset").children("ul");l.html("");$.each(a,function(a,d){l.append(d).find(".ajax-bot-queue-add-again:visible:last").ajaxBotQueueAddAgain()})}else f.next("fieldset").next("fieldset").next("fieldset").children("ul").html('<li class="icon-error"><span>'+tjs.get("No songs found")+"</span></li>")}else setTimeout(function(){f.find(".ajax-bot-player-console[data-action=refresh]").trigger("click")},2500)})});
$("#cache-update-client-current").click(function(){var a=$(this).attr("data-cldbid");$("#tsi-viewer-block").find("li.tsv-node.client[data-cldbid="+a+"]").children(":first").dblclick()});var l=$("#channelGroupList");l&&l.change(function(a){var d=$(this).val(),c=$("#ajax-client-channel-assignements"),b="index.php?controller=ajax&action=cgByChannelId";void 0!==a.originalEvent&&(b+="&content=real-time");c.loadWithEffect(b,{id:id,sid:sid,cid:d,cldbid:g},function(){$(this).applyTemplateSetup()})}).trigger("change");
$(".ajax-modify-servergroup").change(function(a){a.preventDefault();a={id:id,sid:sid,cldbid:g,sgid:$(this).attr("id")};$(this).prop("checked")?$(this).clientSgAdd(a,function(){$(this).parent().css({"border-color":"#3399CC","border-style":"solid","border-width":"2px"});parent.$("#ajax-auto-refresh").prop("checked")&&parent.$(".tsi-viewer-refresh:first").click()}):$(this).clientSgRem(a,function(){$(this).parent().css({"border-width":"0"});parent.$("#ajax-auto-refresh").prop("checked")&&parent.$(".tsi-viewer-refresh:first").click()})});
$(".ajax-modify-channelgroup").change(function(a){a.preventDefault();var d=$(this).attr("id");a={id:id,sid:sid,cldbid:g,cid:0,cgid:d};$(this).clientCgSet(a,function(){var a=0;$(this).parent().parent().find("p").each(function(){var b=$(this).children("input[type=checkbox]:checked");b&&b.attr("id")!==d&&(b.prop("checked",!1),b.prop("disabled",!1),b.parent().css({"border-width":"0"}),a++)});$(this).prop("disabled",!0);$(this).parent().css({"border-color":"#3399CC","border-style":"solid","border-width":"2px"});
parent.$("#ajax-auto-refresh").prop("checked")&&parent.$(".tsi-viewer-refresh:first").click()})});var h=$("#ajax-private-chat"),n=$("#ajax-private-chat-auto-refresh");$("#ajax-private-chat-form").submit(function(a){function d(a,b){b=void 0===b?"1":b;$("#tab-client-private-chat").serverNotifyTextMsg(a,function(){c();"1"===b&&setTimeout(function(){d(a,b)},500)})}a.preventDefault();a={id:id,sid:sid,cldbid:g,message:$("#ajax-private-chat-message").val()};$("#tab-client-private-chat").clientPrivMsgSend(a,
function(){var a=this.msg;$("#ajax-private-chat-message").val("");var b=h.html();h.html(b+tiny(a)+"<br/>");h.parent().animate({scrollTop:h.height()},2E3);this.cbstatus||n.prop("disabled",!0);n.prop("disabled")&&setTimeout(function(){n.prop("checked",!0).prop("disabled",!1);c();d({id:id,sid:sid})},500)})});n.click(function(a){a.preventDefault();$(this).prop("disabled")||($(this).prop("checked")?$(this).prop("checked",!1):($(this).prop("checked",!0),c()))});$(".ajax-refresh-chat").click(function(a){a.preventDefault();
$.ajax({url:"index.php?controller=ajax&action=fetchChatLog&path="+encodeURIComponent(k),contentType:"application/json",dataType:"text",success:function(a){a=JSON.parse(a).result;h.html(nl2br(void 0===a.data?"":a.data));$("#ajax-chat-loader").hide()},error:function(){$("#ajax-chat-loader").hide()}});$("#ajax-chat-loader").show();h.parent().animate({scrollTop:h.height()},2E3)});$(".ajax-delete-chat:first").click(function(a){a.preventDefault();a={id:id,sid:sid,cldbid:g};$("#tab-client-private-chat").clientChatClear(a,
function(){h.html("")})});$("#tab-client-private-chat-2").onTabShow(function(a){a.preventDefault();h.parent().animate({scrollTop:h.height()});$(".tsi-viewer-refresh").prop("disabled",!0)})});
