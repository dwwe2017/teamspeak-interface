var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,d=0;d<f;d++){var g=a[d];if(b.call(c,g,d,a))return{i:d,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in c||(c[d]={});c=c[d]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$(document).ready(function(){$("#instance_icon").change(function(){var a=$(this).find("option:selected").attr("data-prev");$("#instance_icon_preview").attr("src",a)}).trigger("change");$("#instance-edit-form").submit(function(a){a.preventDefault();a=$("#instance-edit-id").val();var b=btoa($("#server-ip").val()),c=btoa($("#query-port").val()),f=btoa(encodeURIComponent($("#label").val())),d=btoa($("#serveradmin").val()),g=btoa($("#server-pass").val()),n=btoa($("#instance_icon").val()),l=$("#athp_link"),
h=$("#tls");l=l.length?btoa(l.val()):btoa("");var p=h.length?h.prop("checked")?1:0:0,e=$("#server-block");e.parent().scrollTop(0);if(a&&0!==a.length)if(b&&0!==b.length)if(c&&0!==c.length)if(d&&0!==d.length)if(g&&0!==g.length){var k=$(".block-footer.align-right").find("button[type=button]:first");k.disableBt();(h=$(this).attr("action"))&&""!==h||(h=document.location.href.match(/^([^#]+)/)[1]);a={a:$("#a").val(),id:a,server_ip:b,query_port:c,label:f,serveradmin:d,password:g,athp_link:l,tls:btoa(p),
custom_icon:n};b=$("#redirect");0<b.length&&(a.redirect=b.val());var m=(new Date).getTime();$.ajax({url:h,dataType:"json",type:"POST",data:a,success:function(a,b,c){a.valid?(b=(new Date).getTime(),500>b-m?setTimeout(function(){e.removeBlockMessages().blockMessage(tjs.get("Instance changes successfully saved"),{type:"success"});a.redirect&&(document.location.href=a.redirect);k.enableBt()},500-(b-m)):(e.removeBlockMessages().blockMessage(tjs.get("Instance changes successfully saved"),{type:"success"}),
a.redirect&&(document.location.href=a.redirect),k.enableBt())):a.error?(e.removeBlockMessages().blockMessage(a.error||tjs.get("An unexpected error occurred, please try again"),{type:"error"}),k.enableBt()):a.warning&&(e.removeBlockMessages().blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning"}),k.enableBt())},error:function(a,b,c){e.removeBlockMessages().blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error"});k.enableBt()}});
e.removeBlockMessages().blockMessage(tjs.get("Please wait, checking..."),{type:"loading"})}else e.removeBlockMessages().blockMessage(tjs.get("Please enter password for query access"),{type:"warning"});else e.removeBlockMessages().blockMessage(tjs.get("Please enter username for query access"),{type:"warning"});else e.removeBlockMessages().blockMessage(tjs.get("Please enter the server query port"),{type:"warning"});else e.removeBlockMessages().blockMessage(tjs.get("Please enter the server ip address"),
{type:"warning"});else e.removeBlockMessages().blockMessage(tjs.get("Entity id is missing"),{type:"warning"})})});
