$(document).ready(function(){var c={id:id,sid:sid,block:$("#view-snapshots-block")};$(".ajax-delete-snapshot").click(function(a){a.preventDefault();$(this).serverSnapshotDelete(c,function(){$(this).parent().parent().fadeOut()})});$(".ajax-deploy-snapshot").click(function(a){a.preventDefault();$(this).serverSnapshotDeploy(c)});$(".ajax-deploy-snapshot-icons").click(function(a){a.preventDefault();a={id:id,sid:sid,block:$("#view-snapshots-block"),target:"index.php?controller=ajax&action=snapshotDeploy&icons=true"};
$(this).serverSnapshotDeploy(a,function(){var a=this.block,h=this.item,c=this.data,f=void 0===c.icons?[]:c.icons,n=document.getElementById(h[0].id),p=document.getElementById(h[0].id+"-loading"),q=document.getElementById(h[0].id+"-tag"),k=document.getElementById(h[0].id+"-progress"),e=0,m=f.length,l=0,g=0;if(f&&f!==[]&&f.hasOwnProperty(e)){q.style.display="none";k.style.display="block";n.style.display="none";p.style.display="unset";var r=function(){e<m?($.get("index.php?controller=ajax&action=pushIcon&id="+
id+"&sid="+sid+"&from="+encodeURIComponent(f[e]),function(b,a){!1===(void 0===b.valid?!1:b.valid)?g++:l++;r()}),e++,k.firstElementChild.firstElementChild.style.width=(e/m*100).toFixed(0)+"%",k.firstElementChild.firstElementChild.innerHTML=(e/m*100).toFixed(0)+"%"):$.get("index.php?controller=ajax&action=refreshVirtualServerIconFileList&id="+id+"&sid="+sid,function(b,d){n.style.display="unset";p.style.display="none";d=void 0===b.error?"":b.error;var c=void 0===b.redirect?"":b.redirect;(void 0===b.valid?
0:b.valid)?(q.style.display="block",k.style.display="none",b="success",d="",0<g&&0<l?(c="",b="warning",d=l+" "+tjs.get("icons")+" "+tjs.get("successfully imported")+"/ "+g+" "+tjs.get("icons")+" "+tjs.get("could not be imported")):0<g?(c="",b="error",d=g+" "+tjs.get("icons")+" "+tjs.get("could not be imported")):d=l+" "+tjs.get("icons")+" "+tjs.get("successfully imported"),a.removeBlockMessages({except:"table-message"}).blockMessage(d,{type:b,position:"top"}),""!==c&&setTimeout(function(){document.location.href=
c},1E3)):a.removeBlockMessages({except:"table-message"}).blockMessage(d,{type:"error",position:"top"})})};r()}})});$(".ajax-download-snapshot").click(function(a){a.preventDefault();$(this).serverSnapshotDownload(c)})});
