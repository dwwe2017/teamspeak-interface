var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,c){a instanceof String&&(a=String(a));for(var b=a.length,d=0;d<b;d++){var h=a[d];if(e.call(c,h,d,a))return{i:d,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,e,c,b){if(e){c=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var d=a[b];d in c||(c[d]={});c=c[d]}a=a[a.length-1];b=c[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$(document).ready(function(){var a=$("#account-mfa-block");if(a){var e=$("#mfa_type_email"),c=$("#mfa_type_google");e.click(function(){$(this).prop("checked")&&(c.prop("checked",!1),$("#mfa_code").prop("required",!1),$(this).css("opacity","1"),$("#account-mfa-google").hide(),$("#account-mfa-email").css("opacity","1").show())});c.click(function(){$(this).prop("checked")&&(e.prop("checked",!1),$(this).css("opacity","1"),$("#mfa_code").attr("required","required"),$("#account-mfa-email").hide(),$("#account-mfa-google").css("opacity",
"1").show())});$("#account-mfa-email-code-request").click(function(){var b=$(this);b.disableBt();var d=(new Date).getTime();$.ajax({url:"index.php?controller=ajax&action=accountCreateMFA",type:"GET",success:function(c){c.valid?(c=(new Date).getTime(),500>c-d?setTimeout(function(){a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("The one-time password was sent to your email address. If you do not receive the notification within a few minutes, please check whether the email settings of the server are correct!"),
{type:"success"});b.enableBt()},500-(c-d)):(a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("The one-time password was sent to your email address. If you do not receive the notification within a few minutes, please check whether the email settings of the server are correct!"),{type:"success"}),b.enableBt()),b.parent().prev().children().fadeIn("slow")):c.error?(a.removeBlockMessages({except:"no-hide"}).blockMessage(c.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",
position:"top"}),b.enableBt()):c.warning&&(a.removeBlockMessages({except:"no-hide"}).blockMessage(c.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"}),b.parent().prev().children().fadeIn("slow"),b.enableBt())},error:function(){a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error"});b.enableBt()}});a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, processing..."),
{type:"loading"})});a.find("form").submit(function(b){b.preventDefault();a.scrollTop(0);var d=!1,e=b="",g="";c.prop("checked")?(b="google",e=$("#mfa_secret").val(),g=$("#mfa_code_google").val()):(b="email",g=$("#mfa_code_email").val());6!==g.length?a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("The code you entered is incorrect"),{type:"error"}):d=!0;if(!0===d){var f=$("#continue");f.disableBt();(d=$("#account-mfa-form").attr("action"))&&""!==d||(d=document.location.href.match(/^([^#]+)/)[1]);
b={a:"",mfa_active:"none"!==b,mfa_type:b,mfa_secret:e,mfa_code:g};var k=(new Date).getTime();$.ajax({url:d,dataType:"json",type:"POST",data:b,success:function(b){b.valid?(b=(new Date).getTime(),500>b-k?setTimeout(function(){a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Changes saved successfully"),{type:"success"});f.enableBt()},500-(b-k)):(a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Changes saved successfully"),{type:"success"}),f.enableBt()),setTimeout(function(){window.location.href=
"index.php?controller=index&action=index"},750)):b.error?(a.removeBlockMessages({except:"no-hide"}).blockMessage(b.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}),f.enableBt()):b.warning&&(a.removeBlockMessages({except:"no-hide"}).blockMessage(b.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"}),f.enableBt())},error:function(){a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),
{type:"error"});f.enableBt()}});a.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, processing..."),{type:"loading"})}})}});
