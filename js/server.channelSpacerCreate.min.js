(function(c){c.fn.serverChannelSpacerCreate=function(a,e){a=c.extend({a:"",id:c(this).parent("li").parent("ul").attr("data-id"),sid:c(this).parent("li").parent("ul").attr("data-sid"),spacer:c(this).attr("data-content"),block:this.parents("div:first")},a);var b=c(a.block);if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length)if(a.spacer&&0!==a.spacer.length){a={a:a.a,id:a.id,sid:a.sid,spacer:a.spacer};var d="index.php?controller=ajax&action=channelSpacerCreate";d&&""!==d||(d=document.location.href.match(/^([^#]+)/)[1]);
var f=(new Date).getTime();c.ajax({url:d,dataType:"json",type:"POST",data:a,success:function(a){a.valid?(a=(new Date).getTime(),500>a-f?setTimeout(function(){b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Channel successfully created"),{type:"success",position:"top"})},500-(a-f)):b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Channel successfully created"),{type:"success",position:"top"}),"function"===typeof e&&e.call(!0)):a.error?b.removeBlockMessages({except:"table-message"}).blockMessage(a.error||
tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&b.removeBlockMessages({except:"table-message"}).blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(){b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top"})}});b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Please wait, processing..."),
{type:"loading",position:"top"})}else b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Spacer content is missing"),{type:"warning",position:"top"});else b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Virtual server id is missing"),{type:"warning",position:"top"});else b.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top"})}})(jQuery);
