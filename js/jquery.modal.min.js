var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,e,c){b instanceof String&&(b=String(b));for(var a=b.length,d=0;d<a;d++){var h=b[d];if(e.call(c,h,d,b))return{i:d,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,c){b!=Array.prototype&&b!=Object.prototype&&(b[e]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,e,c,a){if(e){c=$jscomp.global;b=b.split(".");for(a=0;a<b.length-1;a++){var d=b[a];d in c||(c[d]={});c=c[d]}b=b[b.length-1];a=c[b];e=e(a);e!=a&&null!=e&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
(function(b){function e(){var c=b("#modal");if(0==c.length){c=b(document.body);var a=c.children(".ie, ie7");0<a.length?a.eq(0).append('<div id="modal"></div>'):c.append('<div id="modal"></div>');c=b("#modal").hide()}return c}b.modal=function(c){var a=b.extend({},b.modal.defaults,c),d=e(),h=0,k=0,x=0,p=0,q=0,r=0,n,l="",w,t=a.title?"":" no-title";c=a.title?"<h1>"+a.title+"</h1>":"";t=a.border?'"><div class="block-content'+t:t;var C=a.border?"></div":"";if(a.useIframe){var g=[];a.width?g.push('width="'+
a.width+'"'):a.maxWidth?g.push('width="'+a.maxWidth+'"'):g.push('width="'+a.minWidth+'"');a.height?g.push('height="'+a.height+'"'):a.maxHeight?g.push('height="'+a.maxHeight+'"'):g.push('height="'+a.minHeight+'"');l='<div class="modal-iframe-wrapper"><iframe src="'+a.url+'" class="modal-content" frameborder="0" '+g.join(" ")+"></iframe></div>"}else{a.content?"string"==typeof a.content?l=a.content:w=a.content.clone(!0).show():l="";var u="";g=[];g.push("min-width:"+a.minWidth+"px;");g.push("min-height:"+
a.minHeight+"px;");a.width&&(g.push("width:"+a.width+"px; "),460<=a.width&&(u=" no-padding"));a.height&&(g.push("height:"+a.height+"px; "),280>=a.height&&(u=""));a.maxWidth&&g.push("max-width:"+a.maxWidth+"px; ");a.maxHeight&&g.push("max-height:"+a.maxHeight+"px; ");g=0<g.length?' style="'+g.join(" ")+'"':"";a.hasOwnProperty("padding")&&(u=a.padding?"":" no-padding");l='<div class="modal-content'+((a.scrolling?" modal-scroll":"")+u)+'"'+g+">"+l+"</div>"}var f=b('<div class="modal-window block-border'+
t+'">'+c+l+"</div"+C+">").appendTo(d),m=f.find(".modal-content"),y=a.useIframe?m.parent():m;w&&w.appendTo(y);if(a.resizable&&a.border){var A=function(b){var c=b.pageX-q;b=b.pageY-r;var d=Math.max(a.minWidth,x+n.width*c),g=Math.max(a.minHeight,p+n.height*b),e=0,z=0;a.maxWidth&&d>a.maxWidth&&(e=d-a.maxWidth,d=a.maxWidth);a.maxHeight&&g>a.maxHeight&&(z=g-a.maxHeight,g=a.maxHeight);a.useIframe?m.attr("width",d).attr("height",g):m.css({width:d+"px",height:g+"px"});f.css({left:h+n.left*(c+e)+"px",top:k+
n.top*(b+z)+"px"})};b('<div class="modal-resize-tl"></div>').appendTo(f).data("modal-resize",{top:1,left:1,height:-1,width:-1}).add(b('<div class="modal-resize-t"></div>').appendTo(f).data("modal-resize",{top:1,left:0,height:-1,width:0})).add(b('<div class="modal-resize-tr"></div>').appendTo(f).data("modal-resize",{top:1,left:0,height:-1,width:1})).add(b('<div class="modal-resize-r"></div>').appendTo(f).data("modal-resize",{top:0,left:0,height:0,width:1})).add(b('<div class="modal-resize-br"></div>').appendTo(f).data("modal-resize",
{top:0,left:0,height:1,width:1})).add(b('<div class="modal-resize-b"></div>').appendTo(f).data("modal-resize",{top:0,left:0,height:1,width:0})).add(b('<div class="modal-resize-bl"></div>').appendTo(f).data("modal-resize",{top:0,left:1,height:1,width:-1})).add(b('<div class="modal-resize-l"></div>').appendTo(f).data("modal-resize",{top:0,left:1,height:0,width:-1})).mousedown(function(a){x=m.width();p=m.height();var c=f.position();h=c.left;k=c.top;q=a.pageX;r=a.pageY;n=b(this).data("modal-resize");
a.preventDefault();b(document).bind("mousemove",A)});d.mouseup(function(){b(document).unbind("mousemove",A)})}f.mousedown(function(){b(this).putModalOnFront()});if(a.draggable&&c){var B=function(a){var c=f.outerWidth(),g=f.outerHeight();f.css({left:Math.max(0,Math.min(h+(a.pageX-q),b(d).width()-c))+"px",top:Math.max(0,Math.min(k+(a.pageY-r),b(d).height()-g))+"px"})};f.find("h1:first").mousedown(function(a){var c=f.position();h=c.left;k=c.top;q=a.pageX;r=a.pageY;a.preventDefault();b(document).bind("mousemove",
B)});d.mouseup(function(){b(document).unbind("mousemove",B)})}a.closeButton&&b('<ul class="action-tabs right"><li><a href="#" title="Close window"><img src="images/pkg-default/16/delete.png" width="16" height="16"></a></li></ul>').prependTo(f).find("a").click(function(a){a.preventDefault();b(this).closest(".modal-window").closeModal()});var v=!1;b.each(a.buttons,function(c,d){v?v.append("&nbsp;"):v=b('<div class="block-footer align-'+a.buttonsAlign+'"></div>').insertAfter(y);b('<button type="button">'+
tjs.get(c)+"</button>").appendTo(v).click(function(a){d.call(this,b(this).closest(".modal-window"),a)})});a.onClose&&f.bind("closeModal",a.onClose);f.applyTemplateSetup();d.is(":visible")?f.centerModal():(f.hide(),d.fadeIn("normal",function(){f.show().centerModal()}));b.modal.current=f;b.modal.all=d.children(".modal-window");a.onOpen&&a.onOpen.call(f.get(0));a.url&&f.loadModalContent(a.url,a);return f};b.modal.current=!1;b.modal.all=b();b.fn.modal=function(c){var a=b();this.each(function(){a.add(b.modal(b.extend(c,
{content:b(this).clone(!0).show()})))});return a};b.fn.getModalContentBlock=function(){return this.find(".modal-content")};b.fn.getModalWindow=function(){return this.closest(".modal-window")};b.fn.setModalContent=function(c,a){this.each(function(){var d=b(this).getModalContentBlock().not("iframe");0<d.length&&("string"==typeof c?d.html(c):c.clone(!0).show().appendTo(d),d.applyTemplateSetup(),a&&d.setModalContentSize(!0,!1))});return this};b.fn.setModalContentSize=function(c,a){this.each(function(){var d=
b(this).getModalContentBlock(),h=d.is("iframe");!0!==c&&(h?c&&d.attr("width",c):d.css("width",c?c+"px":""));!0!==a&&(h?a&&d.attr("height",a):d.css("height",a?a+"px":""))});return this};b.fn.loadModalContent=function(c,a){var d=b.extend({loadingMessage:"",data:{},complete:function(a,b,c){},resize:!0,resizeOnMessage:!1,resizeOnLoad:!1},a);this.each(function(){var a=b(this),e=a.getModalContentBlock();e.is("iframe")?e.attr("src",c):(d.loadingMessage&&a.setModalContent('<div class="modal-loading">'+d.loadingMessage+
"</div>",d.resize||d.resizeOnMessage),e.load(c,d.data,function(b,c,h){var k=!1;a.is(":hidden")&&(a.show(),k=!0);e.applyTemplateSetup();(d.resize||d.resizeOnLoad)&&e.setModalContentSize(!0,!1);d.complete.call(this,b,c,h);k&&a.hide()}))});return this};b.fn.setModalTitle=function(c){this.each(function(){var a=b(this),d=b(this).find("h1");a=a.hasClass("block-content")?a:a.children(".block-content:first");0<c.length?(0==d.length&&(a.removeClass("no-title"),d=b("<h1>"+c+"</h1>").prependTo(a)),d.html(c)):
0<d.length&&(d.remove(),a.addClass("no-title"))});return this};b.fn.addButtons=function(c,a){var d=b.modal.current,e=d.find(".block-footer");contentDiv=d.find(".modal-content");a&&e.children().remove();b.each(c,function(a,c){e.append("&nbsp;");b('<button type="button">'+tjs.get(a)+"</button>").appendTo(e).click(function(a){c.call(this,b(this).getModalWindow(),a)})})};b.fn.centerModal=function(c){var a=e(),d=a.width()/2,h=a.height()/2;this.each(function(){var a=b(this),e=Math.round(a.outerWidth()/
2),p=Math.round(a.outerHeight()/2);a[c?"animate":"css"]({left:d-e+"px",top:h-p+"px"})});return this};b.fn.putModalOnFront=function(){if(1<b.modal.all.length){var c=e();this.each(function(){0<b(this).next(".modal-window").length&&b(this).detach().appendTo(c)})}return this};b.fn.closeModal=function(){this.each(function(){var c=b.Event("closeModal"),a=b(this);a.trigger(c);c.isDefaultPrevented()||(a.remove(),c=e(),b.modal.all=c.children(".modal-window"),0==b.modal.all.length?(b.modal.current=!1,c.fadeOut("normal")):
b.modal.current=b.modal.all.last())});return this};b.modal.defaults={content:!1,useIframe:!1,url:!1,title:!1,border:!0,draggable:!0,resizable:!0,scrolling:!0,closeButton:!0,buttons:{},buttonsAlign:"right",onOpen:!1,onClose:!1,minHeight:40,minWidth:200,maxHeight:!1,maxWidth:!1,height:!1,width:450,loadingMessage:"Loading...",data:{},complete:function(b,a,d){},resize:!0,resizeOnMessage:!1,resizeOnLoad:!1}})(jQuery);
