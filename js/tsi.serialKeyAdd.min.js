(function(a){a.fn.serialKeyAdd=function(e,f){var c=a.extend({a:"",modul:a("#modul").val(),serial_key:encodeURIComponent(a("#serial_key").val()),redirect:a("#redirect").val(),block:this},e),d=this;(e=d.attr("action"))&&""!==e||(e=document.location.href.match(/^([^#]+)/)[1]);c={a:c.a,redirect:c.redirect,modul:c.modul,serial_key:c.serial_key};var g=(new Date).getTime();a.ajax({url:e,dataType:"json",type:"POST",data:c,success:function(b,a,c){b.valid?(a=(new Date).getTime(),500>a-g?setTimeout(function(){b.redirect?
document.location.href=b.redirect:d.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("License added successfully"),{type:"success",position:"top"})},500-(a-g)):b.redirect?document.location.href=b.redirect:d.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("License added successfully"),{type:"success",position:"top"}),"function"===typeof f&&f.call(item)):b.error?d.removeBlockMessages({except:"table-message"}).blockMessage(b.error||tjs.get("An unexpected error occurred, please try again"),
{type:"error",position:"top"}):b.warning&&d.removeBlockMessages({except:"table-message"}).blockMessage(b.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(a,c,e){d.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top"})}});d.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Please wait, updating..."),{type:"loading",position:"top"})}})(jQuery);
