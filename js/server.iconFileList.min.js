(function(f){f.fn.iconFileList=function(c,g,e){var a=f.extend({a:"",id:"",sid:"",noMargin:!0},c),b=this;if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length){(c="index.php?controller=ajax&action=getVirtualServerIconFileList",""!==c)||(c=document.location.href.match(/^([^#]+)/)[1]);var h={a:a.a,id:a.id,sid:a.sid},k=(new Date).getTime();f.ajax({url:c,dataType:"json",type:"POST",data:h,success:function(d,c,f){d.valid?(c=(new Date).getTime(),"function"===typeof g?g.call({data:d,form:b}):500>c-k?setTimeout(function(){b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Icons successfully imported"),
{type:"success",position:"top",noMargin:a.noMargin})},500-(c-k)):b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Icons successfully imported"),{type:"success",position:"top",noMargin:a.noMargin})):d.error?"function"===typeof e?e.call({data:d,form:b}):b.removeBlockMessages({except:"no-hide"}).blockMessage(d.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top",noMargin:a.noMargin}):d.warning&&("function"===typeof e?e.call({data:d,form:b}):b.removeBlockMessages({except:"no-hide"}).blockMessage(d.warning||
tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:a.noMargin}))},error:function(c,f,g){"function"===typeof e?e.call({data:h,form:b}):b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top",noMargin:a.noMargin})}});b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, import is running..."),{type:"loading",position:"top",noMargin:a.noMargin})}else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Virtual server id is missing"),
{type:"warning",position:"top",noMargin:a.noMargin});else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top",noMargin:a.noMargin})}})(jQuery);
