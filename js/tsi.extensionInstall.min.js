(function(c){c.fn.extensionInstall=function(a){var d=c.extend({a:"",serial_key:encodeURIComponent(c("#serial_key").val()),noMargin:!0},a),e=this;(a=e.attr("action"))&&""!==a||(a=document.location.href.match(/^([^#]+)/)[1]);data=new FormData(e[0]);data.append("a",d.a);data.append("serial_key",d.serial_key);var f=(new Date).getTime();c.ajax({url:a,dataType:"json",type:"POST",data:data,processData:!1,contentType:!1,success:function(b,a,c){b.valid?(a=(new Date).getTime(),500>a-f?setTimeout(function(){document.location.href=
b.redirect},500-(a-f)):document.location.href=b.redirect):b.error?e.removeBlockMessages({except:"no-hide"}).blockMessage(b.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top",noMargin:d.noMargin}):b.warning&&e.removeBlockMessages({except:"no-hide"}).blockMessage(b.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:d.noMargin})},error:function(a,c,f){e.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),
{type:"error",position:"top",noMargin:d.noMargin})}});e.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, checking package..."),{type:"loading",position:"top",noMargin:d.noMargin})}})(jQuery);
