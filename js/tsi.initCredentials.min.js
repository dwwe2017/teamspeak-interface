(function(c){c.fn.initCredentials=function(a){var b=c.extend({a:"",pass:btoa(c("#pass").val()),pass_confirm:btoa(c("#pass-confirm").val()),block:this},a),d=c(b.block);if(b.pass&&0!==b.pass.length)if(b.pass_confirm&&0!==b.pass_confirm.length){(a="index.php?controller=ajax&action=initCredentials",""!==a)||(a=document.location.href.match(/^([^#]+)/)[1]);b={a:b.a,pass:b.pass,pass_confirm:b.pass_confirm};var e=(new Date).getTime();c.ajax({url:a,dataType:"json",type:"POST",data:b,success:function(a,b,c){a.valid?
(b=(new Date).getTime(),500>b-e?setTimeout(function(){document.location.href=a.redirect},500-(b-e)):document.location.href=a.redirect):a.error?d.removeBlockMessages().blockMessage(a.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&d.removeBlockMessages().blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(a,b,c){d.removeBlockMessages().blockMessage(tjs.get("Error while contacting server, please try again"),
{type:"error",position:"top"})}});d.removeBlockMessages().blockMessage(tjs.get("Please wait, saving..."),{type:"loading",position:"top"})}else d.removeBlockMessages().blockMessage(tjs.get("Please confirm password"),{type:"warning",position:"top"});else d.removeBlockMessages().blockMessage(tjs.get("Password is missing"),{type:"warning",position:"top"})};String.prototype.rot13=function(){return this.replace(/[a-zA-Z]/g,function(a){return String.fromCharCode(("Z">=a?90:122)>=(a=a.charCodeAt(0)+13)?a:
a-26)})}})(jQuery);
