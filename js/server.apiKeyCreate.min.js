(function(c){c.fn.serverApiKeyCreate=function(b,e){var a=c.extend({a:"",id:"",sid:"",scope:c("#scope").val(),lifetime:c("#lifetime").val(),client:c("#client").val(),block:this},b),d=c(a.block);if(scope.id&&0!==scope.id.length){(b="index.php?controller=ajax&action=apiKeyCreate",""!==b)||(b=document.location.href.match(/^([^#]+)/)[1]);a={a:a.a,id:a.id,sid:a.sid,scope:a.scope,lifetime:a.lifetime,client:a.client};var f=(new Date).getTime();c.ajax({url:b,dataType:"json",type:"POST",data:a,success:function(a,
b,g){a.valid?(b=(new Date).getTime(),500>b-f?setTimeout(function(){d.removeBlockMessages().blockMessage(tjs.get("Api key created successfully"),{type:"success",position:"top"})},500-(b-f)):d.removeBlockMessages().blockMessage(tjs.get("Api key created successfully"),{type:"success",position:"top"}),a=a.apikey,c.modal({title:tjs.get("Api key"),content:'<p><div class="infos align-center"><b>'+a+"</b></div></p>",draggable:!0,closeButton:!0,scrolling:!0,buttons:{Close:function(a){a.closeModal()}}}),"function"===
typeof e&&e.call(d)):a.error?d.removeBlockMessages().blockMessage(a.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&d.removeBlockMessages().blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(a,b,c){d.removeBlockMessages().blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top"})}});d.removeBlockMessages().blockMessage(tjs.get("Please wait, processing..."),
{type:"loading",position:"top"})}else d.removeBlockMessages().blockMessage(tjs.get("Scope is missing"),{type:"warning",position:"top"})}})(jQuery);
