(function(d){d.fn.serverSnapshotDeploy=function(b,e){var a=d.extend({a:"",id:"",sid:"",file:d(this).attr("id"),block:"",target:"index.php?controller=ajax&action=snapshotDeploy"},b),c=a.block,g=this;if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length)if(a.file&&0!==a.file.length){(b=a.target)&&""!==b||(b=document.location.href.match(/^([^#]+)/)[1]);a={a:a.a,id:a.id,sid:a.sid,file:a.file.replace("-deploy-icons","")};var f=(new Date).getTime();d.ajax({url:b,dataType:"json",type:"POST",data:a,success:function(a,
b,d){a.valid?(b=(new Date).getTime(),"function"===typeof e?e.call({data:a,block:c,item:g}):500>b-f?setTimeout(function(){a.redirect?document.location.href=a.redirect:c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Snapshot deployed successfully"),{type:"success",position:"top"})},500-(b-f)):a.redirect?document.location.href=a.redirect:c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Snapshot deployed successfully"),{type:"success",position:"top"})):a.error?
c.removeBlockMessages({except:"table-message"}).blockMessage(a.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&c.removeBlockMessages({except:"table-message"}).blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(a,b,d){c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get(tjs.get("Error while contacting server, please try again")),{type:"error",position:"top"})}});
c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get(tjs.get("Please wait, processing...")),{type:"loading",position:"top"})}else c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Filename is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Virtual server id is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get(tjs.get("Entity id is missing")),
{type:"warning",position:"top"})}})(jQuery);
