(function(f){f.fn.channelMove=function(e,g){function d(a){a&&a.sortable("cancel");"function"===typeof g&&g.call(!1)}var a=f.extend({a:"",id:"",sid:"",cid:"",pid:"",order_id:"",sortable:void 0,noMargin:!0},e),b=this;if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length)if(a.cid&&0!==a.cid.length)if(a.pid&&0!==a.pid.length)if(a.order_id&&0!==a.order_id.length){(e="index.php?controller=ajax&action=channelMove",""!==e)||(e=document.location.href.match(/^([^#]+)/)[1]);var k={a:a.a,id:a.id,sid:a.sid,cid:a.cid,
pid:a.pid,order_id:a.order_id},h=(new Date).getTime();f.ajax({url:e,dataType:"json",type:"POST",data:k,success:function(c,e,f){c.valid?(c=(new Date).getTime(),500>c-h?setTimeout(function(){b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Channel moved successfully"),{type:"success",position:"top",noMargin:a.noMargin})},500-(c-h)):b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Channel moved successfully"),{type:"success",position:"top",noMargin:a.noMargin}),"function"===
typeof g&&g.call(!0)):c.error?(b.removeBlockMessages({except:"no-hide"}).blockMessage(c.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top",noMargin:a.noMargin}),d(a.sortable)):c.warning&&(b.removeBlockMessages({except:"no-hide"}).blockMessage(c.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:a.noMargin}),d(a.sortable))},error:function(c,e,f){b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),
{type:"error",position:"top",noMargin:a.noMargin});d(a.sortable)}});b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, saving..."),{type:"loading",position:"top",noMargin:a.noMargin})}else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Order id is missing"),{type:"warning",position:"top",noMargin:a.noMargin}),d(a.sortable);else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Parent channel id is missing"),{type:"warning",position:"top",noMargin:a.noMargin}),
d(a.sortable);else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Channel id is missing"),{type:"warning",position:"top",noMargin:a.noMargin}),d(a.sortable);else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Virtual server id is missing"),{type:"warning",position:"top",noMargin:a.noMargin}),d(a.sortable);else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top",noMargin:a.noMargin}),d(a.sortable)}})(jQuery);
