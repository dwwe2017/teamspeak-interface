(function(b){b.fn.tsiCronjobEdit=function(d){var a=b.extend({a:"",cronjobId:b("#cronjobId").val(),namespace:b("#namespace").val(),class:b("#class").val(),method:b("#method").val(),expression:b("#expression").val(),description:b("#description").val(),redirect:b("#redirect").val(),active:b("#active").is(":checked")?"1":"0",block:this},d),c=a.block;if(a.cronjobId&&0!==a.cronjobId.length)if(a.namespace&&0!==a.namespace.length)if(a.class&&0!==a.class.length)if(a.method&&0!==a.method.length)if(a.expression&&
0!==a.expression.length)if(a.description&&0!==a.description.length){(d=c.attr("action"))&&""!==d||(d=document.location.href.match(/^([^#]+)/)[1]);a={a:a.a,cronjobId:a.cronjobId,namespace:a.namespace,class:a.class,method:a.method,expression:a.expression,description:a.description,redirect:a.redirect,active:a.active};var e=(new Date).getTime();b.ajax({url:d,dataType:"json",type:"POST",data:a,success:function(a,b,d){a.valid?(b=(new Date).getTime(),500>b-e?setTimeout(function(){c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Changes saved successfully"),
{type:"success",position:"top"});document.location.href=a.redirect},500-(b-e)):(c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Changes saved successfully"),{type:"success",position:"top"}),document.location.href=a.redirect)):a.error?c.removeBlockMessages({except:"no-hide"}).blockMessage(a.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&c.removeBlockMessages({except:"no-hide"}).blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),
{type:"warning",position:"top"})},error:function(a,b,d){c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top"})}});c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, processing..."),{type:"loading",position:"top"})}else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Description is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Cron expression is missing"),
{type:"warning",position:"top"});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Method is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Class is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Namespace is missing"),{type:"warning",position:"top"});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Cronjob id is missing"),{type:"warning",
position:"top"})}})(jQuery);
