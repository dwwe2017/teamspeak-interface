(function(e){e.fn.serverHostbannerUpload=function(b,f){var a=e.extend({a:"",id:"",sid:"",noMargin:!0},b),c=this;if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length){(b=c.attr("action"))&&""!==b||(b=document.location.href.match(/^([^#]+)/)[1]);data=new FormData(c[0]);data.append("a",a.a);data.append("id",a.id);data.append("sid",a.sid);var g=(new Date).getTime();e.ajax({url:b,dataType:"json",type:"POST",data:data,processData:!1,contentType:!1,success:function(d,b,e){d.valid?(b=(new Date).getTime(),
500>b-g?setTimeout(function(){c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Hostbanner successfully uploaded"),{type:"success",position:"top",noMargin:a.noMargin})},500-(b-g)):c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Hostbanner successfully uploaded"),{type:"success",position:"top",noMargin:a.noMargin}),"function"===typeof f&&f.call(d)):d.error?c.removeBlockMessages({except:"no-hide"}).blockMessage(d.error||tjs.get("An unexpected error occurred, please try again"),
{type:"error",position:"top",noMargin:a.noMargin}):d.warning&&c.removeBlockMessages({except:"no-hide"}).blockMessage(d.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:a.noMargin})},error:function(b,e,f){c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top",noMargin:a.noMargin})}});c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, sending data to server..."),
{type:"loading",position:"top",noMargin:a.noMargin})}else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Virtual server id is missing"),{type:"warning",position:"top",noMargin:a.noMargin});else c.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top",noMargin:a.noMargin})}})(jQuery);
