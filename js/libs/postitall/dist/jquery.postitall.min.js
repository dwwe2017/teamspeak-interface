var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,q,l){a instanceof String&&(a=String(a));for(var m=a.length,f=0;f<m;f++){var v=a[f];if(q.call(l,v,f,a))return{i:f,v:v}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,q,l){a!=Array.prototype&&a!=Object.prototype&&(a[q]=l.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,q,l,m){if(q){l=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var f=a[m];f in l||(l[f]={});l=l[f]}a=a[a.length-1];m=l[a];q=q(m);q!=m&&null!=q&&$jscomp.defineProperty(l,a,{configurable:!0,writable:!0,value:q})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,l){return $jscomp.findInternal(this,a,l).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var q=0;return function(){return q<a.length?{done:!1,value:a[q++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,q){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var l=0,m={next:function(){if(l<a.length){var f=l++;return{value:q(f,a[f]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,l){return l})}},"es8","es3");
var delay=function(){var a=0;return function(q,l){clearTimeout(a);a=setTimeout(q,l)}}();
(function(a,q,l,m,f){"undefined"===typeof console&&(console={log:function(){return f}});Date.prototype.addDays=function(a){var c=new Date(this.valueOf());c.setDate(c.getDate()+a);return c};Date.prototype.addHours=function(a){var c=new Date(this.valueOf());c.setTime(c.getTime()+36E5*a);return c};Date.prototype.addMinutes=function(a){var c=new Date(this.valueOf());c.setTime(c.getTime()+6E4*a);return c};Date.prototype.addSeconds=function(a){var c=new Date(this.valueOf());c.setTime(c.getTime()+1E3*a);
return c};Date.prototype.toFormat=function(a){var c=this.getMonthName(),b=this.getDayName();a=a.replace(/yyyy/g,this.getFullYear());a=a.replace(/yy/g,String(this.getFullYear()).substr(2,2));a=a.replace(/MMM/g,c.substr(0,3).toUpperCase());a=a.replace(/Mmm/g,c.substr(0,3));a=a.replace(/MM\*/g,c.toUpperCase());a=a.replace(/Mm\*/g,c);a=a.replace(/mm/g,String(this.getMonth()+1).padLeft("0",2));a=a.replace(/DDD/g,b.substr(0,3).toUpperCase());a=a.replace(/Ddd/g,b.substr(0,3));a=a.replace(/DD\*/g,b.toUpperCase());
a=a.replace(/Dd\*/g,b);a=a.replace(/dd/g,String(this.getDate()).padLeft("0",2));return a=a.replace(/d\*/g,this.getDate())};Date.prototype.getMonthName=function(){return this.toLocaleString().replace(/[^a-z]/gi,"")};Date.prototype.getDayName=function(){switch(this.getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}};String.prototype.padLeft=function(a,d){for(var b=this;b.length<
d;)b=a+b;return b};a.extend(a.fn,{postitall:function(c,d,b){var e=new v,g=a(".PIAeditable").find(this);0>=g.length&&(g=a(this));g=g.filter(function(){return!a(this).parents("#the_lights").length});switch(c){case "destroy":return g.each(function(b,c){a(c).hasClass("PIApostit")?e.destroy(a(c)):a(c).attr("PIA-original")!==f&&e.destroy(a(c).parent().parent().parent().parent())}),a(this);case "options":var k=f;g.each(function(b,c){if(a(c).hasClass("PIApostit")){if(d===f)return k=a(c).data("PIA-options"),
!1;e.destroy(a(c),!1);var g=a(c).data("PIA-options")||{};setTimeout(function(){a.PostItAll.new(a.extend(!0,g,d))},400)}else if(a(c).attr("PIA-original")!==f){b=a(c).parent().parent().parent().parent();if(d===f)return k=b.data("PIA-options"),!1;e.destroy(b,!1);g=b.data("PIA-options")||{};setTimeout(function(){a.PostItAll.new(a.extend(!0,g,d))},400)}});return k!==f?1===a(k).length?a(k)[0]:a(k):a(this);case "hide":return g.each(function(b,c){a(c).hasClass("PIApostit")?e.hide(a(c).data("PIA-id")):a(c).attr("PIA-original")!==
f&&e.hide(a(c).parent().parent().parent().parent().data("PIA-id"))}),a(this);case "show":return g.each(function(b,c){a(c).hasClass("PIApostit")?e.show(a(c).data("PIA-id")):a(c).attr("PIA-original")!==f&&e.show(a(c).parent().parent().parent().parent().data("PIA-id"))}),a(this);case "save":return g.each(function(b,c){a(c).hasClass("PIApostit")?e.save(a(c)):a(c).attr("PIA-original")!==f&&e.save(a(c).parent().parent().parent().parent())}),a(this);default:var p=0,n=0,h=!1;"new"!==c&&(d=c,c="new");if(d===
f||"object"!==typeof d)d={};h||(d.posX!==f&&(p=d.posX,h=!0),d.posY!==f&&(n=d.posY,h=!0));var l=!1;a.each(a(this).filter(function(){return!a(this).parents("#the_notes").length}),function(b,c){if(a(c).attr("PIA-original")!==f)return l=!0,!1});l?a.PostItAll.show():a.each(a(this).filter(function(){return!a(this).parents("#the_notes").length}),function(c,e){h||(p=a(this).offset().left,n=a(this).offset().top);a.extend(d,{posX:p,posY:n},!0);a.PostItAll.new("",d,a(e),b)});return a(this)}}});a.fn.postitall.cssclases=
{note:"note",withTextShadowWhite:"withTextShadowWhite",withTextShadowBlack:"withTextShadowBlack",withoutTextShadow:"withoutTextShadow",withBoxShadow:"withBoxShadow",withoutBoxShadow:"withoutBoxShadow",icons:{icon:"PIAicon",iconRight:"PIAiconright",iconLeft:"PIAiconleft",iconBottom:"PIAiconbottom",topToolbar:"PIAIconTopToolbar",bottomToolbar:"PIAIconBottomToolbar",close:"PIAclose",config:"PIAconfig",hide:"PIAhide",minimize:"PIAminimize",maximize:"PIAmaximize",expand:"PIAexpand",blocked:"PIAblocked",
blockedOn:"PIAblocked2",delete:"PIAdelete",info:"PIAinfoIcon",copy:"PIAnew",fixed:"PIAfixed",fixedOn:"PIAfixed2",export:"PIAexport"},arrows:{arrow:"arrow_box",none:"",top:"arrow_box_top",right:"arrow_box_right",bottom:"arrow_box_bottom",left:"arrow_box_left"}};a.fn.postitall.globals={prefix:"#PIApostit_",filter:"domain",savable:!1,randomColor:!0,toolbar:!0,autoHideToolBar:!0,removable:!0,askOnDelete:!0,draggable:!0,resizable:!0,editable:!0,changeoptions:!0,blocked:!0,hidden:!0,minimized:!0,expand:!0,
fixed:!0,addNew:!0,showInfo:!0,showMeta:!0,pasteHtml:!0,htmlEditor:!0,autoPosition:!0,addArrow:"back",askOnHide:!0,hideUntil:null,exportNote:!0};a.fn.postitall.globalscopy=a.extend({},a.fn.postitall.globals,!0);a.fn.postitall.defaults={id:"",created:Date.now(),domain:l.location.origin,page:l.location.pathname,pageParams:null!==l.location.search&&""!==l.location.search?l.location.search.substr(1):"",osname:navigator.appVersion,content:"",position:"absolute",posX:"10px",posY:"10px",right:"",height:200,
width:160,minHeight:136,minWidth:136,oldPosition:{},style:{tresd:!0,backgroundcolor:"#FFFA3C",textcolor:"#333333",textshadow:!0,fontfamily:"Open Sans",fontsize:"medium",arrow:"none"},useCssProperties:!0,cssclases:a.extend({},a.fn.postitall.cssclases,!0),features:a.extend({},a.fn.postitall.globals,!0),flags:{blocked:!1,minimized:!1,expand:!1,fixed:!1,highlight:!1,hidden:!1},attachedTo:{element:"",position:"right",fixed:!0,arrow:!0},meta:{Title:{type:"input",maxlength:"20",value:"",placeholder:"Note title"},
Category:{type:"combo",value:"0",values:{0:"Select a category",1:"Personal",2:"Work",3:"Other"}},Observations:{type:"textarea",value:"",placeholder:"Other considerations ..."}},onCreated:function(a,d,b){return f},onChange:function(a){return f},onSelect:function(a){return f},onDblClick:function(a){return f},onRelease:function(a){return f},onDelete:function(a){return f}};a.fn.postitall.defaultscopy=a.extend({},a.fn.postitall.defaults);a.fn.postitall.defaultscopy.style=a.extend({},a.fn.postitall.defaults.style);
a.fn.postitall.defaultscopy.cssclases=a.extend({},a.fn.postitall.defaults.cssclases);a.fn.postitall.defaultscopy.features=a.extend({},a.fn.postitall.defaults.features);a.fn.postitall.defaultscopy.flags=a.extend({},a.fn.postitall.defaults.flags);a.fn.postitall.defaultscopy.attachedTo=a.extend({},a.fn.postitall.defaults.attachedTo);jQuery.PostItAll={__initialize:function(){0>=a("#the_notes").length&&a('<div id="the_notes"></div>').appendTo(a("body"));0>=a("#the_lights").length&&(a('<div id="the_lights"><div id="the_lights_close"></div></div>').appendTo(a("body")),
a("#the_lights").click(function(){(new v).switchOnLights()}));if(0>=a("#the_imports").length){var c=a("<div />",{the_imports:"",style:"display:none;"}),d=a("<input />",{id:"idImportFile",type:"file",name:"files"}).on("change",function(){a("#idImportUpload").click();a("#idImportFile").val("")}),b=a("<button />",{id:"idImportUpload",type:"file",name:"files"}).on("click",function(){if(l.FileReader){var b=a("#idImportFile").get(0);if(b.files.length&&(b=b.files[0],0<b.size&&"text/plain"===b.type)){var c=
new FileReader;c.readAsText(b);a(c).on("load",function(b){if((b=b.target.result)&&b.length&&(b=JSON.parse(b),"object"===typeof b)){var c=function(b,c,d){delete b.id;c&&(delete b.domain,delete b.page);a.PostItAll.new(b,d)};b.id!==f?c(b,a("#idImportFile").data("resetDomainPage"),a("#idImportFile").data("callback")(b)):0<a(b).length&&a(b).each(function(b,d){d.id!==f&&setTimeout(function(){c(d,a("#idImportFile").data("resetDomainPage"),a("#idImportFile").data("callback")(d))},250+250*b)})}})}}});c.append(d).append(b).prependTo(a("body"))}},
changeConfig:function(c,d){if("string"===typeof c){if("global"===c)return"object"===typeof d&&(a.fn.postitall.globals=a.extend({},a.fn.postitall.globals,d)),a.fn.postitall.globals;if("note"===c)return"object"===typeof d&&(d.style!==f&&(a.fn.postitall.defaults.style=a.extend({},a.fn.postitall.defaults.style,d.style),delete d.style),d.cssclases!==f&&(a.fn.postitall.defaults.cssclases=a.extend({},a.fn.postitall.defaults.cssclases,d.cssclases),delete d.cssclases),d.features!==f&&(a.fn.postitall.defaults.features=
a.extend({},a.fn.postitall.defaults.features,d.features),delete d.features),d.flags!==f&&(a.fn.postitall.defaults.flags=a.extend({},a.fn.postitall.defaults.flags,d.flags),delete d.flags),d.attachedTo!==f&&(a.fn.postitall.defaults.attachedTo=a.extend({},a.fn.postitall.defaults.attachedTo,d.attachedTo),delete d.attachedTo),a.fn.postitall.defaults=a.extend({},a.fn.postitall.defaults,d)),a.fn.postitall.defaults}return null},restoreConfig:function(c){c===f&&(c="all");if("string"===typeof c){if("global"===
c||"all"===c)return a.extend(a.fn.postitall.globals,a.fn.postitall.globalscopy,!0),a.fn.postitall.globals;if("note"===c||"all"===c)return a.extend(a.fn.postitall.defaults,a.fn.postitall.defaultscopy,!0),a.fn.postitall.defaults}return null},storageManager:function(a){t.getStorageManager(function(c){a(c)})},new:function(c,d,b,e){var g=!1;e!==f&&(g=!0);g||b===f||"function"!==typeof b||(e=b,b=f,g=!0);g||d===f||"function"!==typeof d||c===f||"object"!==typeof c||(e=d,d=c,c="",g=!0);g||d===f||"function"!==
typeof d||c===f||"string"!==typeof c||(e=d,d=f,g=!0);g||"object"!==typeof c||(e=b,b=d,d=c,c="",g=!0);g||"function"!==typeof c||(e=c,c="",g=!0);g||c!==f||(c="",g=!0);g=parseInt(l.pageXOffset,10);var k=parseInt(l.pageYOffset,10);var p=!1;if(d===f)d=a.extend(!0,{},a.fn.postitall.defaults),d.posX=g,d.posY=k,p=!0;else{d.posX===f&&d.posX===f&&(d.posX=g,d.posY=k,p=!0);var n=a.extend({},a.fn.postitall.defaults,!0);d.meta!==f&&(n.meta=a.extend({},d.meta));d=a.extend(!0,{},n,d)}if("relative"===d.position||
"fixed"===d.position)p||(d.posX=parseInt(d.posX,10)+parseInt(g,10),d.posY=parseInt(d.posY,10)+parseInt(k,10)),"fixed"===d.position&&(d.flags.fixed=!0),d.position="absolute";p&&(d.posX=g+parseInt(a.fn.postitall.defaults.posX,10),d.posY=k+parseInt(a.fn.postitall.defaults.posX,10));d.posX=parseInt(d.posX,10)+"px";d.posY=parseInt(d.posY,10)+"px";var h=new v;b===f?b=a("<div />",{html:c!==f?c:""}).hide():(c=b,a(c).attr("PIA-original","1"),c=a("<div />").append(c),a(c).attr("PIA-original","1"),b=c);a("#the_notes").append(b);
var m=function(b){a.fn.postitall.globals.randomColor&&b.features.randomColor&&(b.style.backgroundcolor===a.fn.postitall.defaults.style.backgroundcolor&&(b.style.backgroundcolor=h.getRandomColor(b)),b.style.textcolor===a.fn.postitall.defaults.style.textcolor&&(b.style.textcolor=h.getTextColor(b)),b.features.randomColor=!1);return b},r=d;""!==r.id?(r=m(r),setTimeout(function(){h.init(b,r);e!==f&&e(a.fn.postitall.globals.prefix+r.id,r,b[0])},100)):h.getIndex(a.fn.postitall.globals.savable||r.features.savable,
function(c){r.id=c;r=m(r);setTimeout(function(){h.init(b,r);e!==f&&e(a.fn.postitall.globals.prefix+r.id,r,b[0])},100)})},options:function(c,d){if("object"===typeof c)a(".PIApostit").postitall("options",c);else if("object"===typeof d)a(c).postitall("options",d);else return a(c).postitall("options")},hide:function(a){this.toggle(a,"hide")},show:function(a){this.toggle(a,"show")},toggle:function(c,d){var b=!1;d===f&&(d="show");c!==f&&"string"===typeof c&&(0<a(a.fn.postitall.globals.prefix+c).length?
(a(a.fn.postitall.globals.prefix+c).postitall(d),b=!0):a(c.toString()).length&&(a(c.toString()).postitall(d),b=!0));b||a(".PIApostit").each(function(){a(this).postitall(d)})},getNotes:function(c,d){var b=0,e=!1,g=[];"undefined"===typeof d&&(d=a.fn.postitall.globals.filter);t.getlength(function(a){if(a)for(var f=1;f<=a;f++)t.key(f,function(f){t.getByKey(f,function(f){null!=f&&(e="domain"===d?f.domain===l.location.origin:"page"===d?f.domain===l.location.origin&&f.page===l.location.pathname:!0)&&g.push(f);
b===a-1&&null!=c&&("function"===typeof c&&c(g),c=null);b++})});else"function"===typeof c&&c(g)})},load:function(c,d,b){var e=-1,g=0;a.PostItAll.getNotes(function(k){0<k.length?(e=k.length,a(k).each(function(k,n){0>=a(a.fn.postitall.globals.prefix+n.id).length&&("object"===typeof d&&(d.onCreated!==f&&(n.onCreated=d.onCreated),d.onChange!==f&&(n.onChange=d.onChange),d.onSelect!==f&&(n.onSelect=d.onSelect),d.onDblClick!==f&&(n.onDblClick=d.onDblClick),d.onRelease!==f&&(n.onRelease=d.onRelease),d.onDelete!==
f&&(n.onDelete=d.onDelete)),n.flags!==f&&(n.flags.highlight=!1,b!==f&&n.id===b&&(n.flags.highlight=!0)),a.PostItAll.new(n));g===e-1&&null!=c&&("function"===typeof c&&c(),c=null);g++})):"function"===typeof c&&c()})},save:function(){var c,d;a(".PIApostit").each(function(b,e){d=a(e).data("PIA-id");c=a(e).data("PIA-options");d!==f&&c!==f&&(a.fn.postitall.globals.savable||c.features.savable)&&a(this).postitall("save")})},length:function(c){a.PostItAll.getNotes(function(a){c!==f&&c(a.length)})},remove:function(a,
d,b){this.destroy(!1,a,d,b)},delete:function(a,d,b){this.destroy(!1,a,d,b)},destroy:function(c,d,b,e){d===f&&(d=!0);b===f&&(b=!0);d&&(c!==f&&"string"===typeof c?(a(c).postitall("options"),b?a(c).postitall("destroy"):a(c).postitall("hide")):a(".PIApostit").each(function(){a(this).postitall("options");b?a(this).postitall("destroy"):a(this).postitall("hide")}));b&&""!==e&&e!==f&&a.PostItAll.clearStorage(e)},clearStorage:function(a,d){a!==f?t.removeDom({domain:a},function(){d!==f&&d()}):t.clear(function(){d!==
f&&d()})},import:function(c,d){c===f&&(c=!0);a("#idImportFile").data("resetDomainPage",c);a("#idImportFile").data("callback",d);a("#idImportFile").trigger("click")},export:function(c){var d=null;"undefined"===typeof c&&(c="loaded");if("string"===typeof c){switch(c){case "all":case "domain":case "page":d=[];a.PostItAll.getNotes(function(b){0<b.length&&a(b).each(function(a,b){d.push(b)})},c);break;case "loaded":d=[];a(".PIApostit").each(function(b,c){b=a.PostItAll.options(a.fn.postitall.globals.prefix+
a(c).data("PIA-id"));d.push(b)});break;default:d=a.PostItAll.options(a.fn.postitall.globals.prefix+c)}setTimeout(function(){if(null!=d&&(d.id!==f||0<d.length)){var b=new Date,e=m.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(d)));e.setAttribute("download",b.toFormat("yyyymmdd")+a.fn.postitall.globals.prefix+c+".txt");e.style.display="none";m.body.appendChild(e);e.click();m.body.removeChild(e)}},250)}}};var v=function(a,d){this.options=
{};this.hoverState=!1};v.prototype={init:function(c,d){this.options=a.extend({},a.fn.postitall.defaults);"object"!==typeof d&&(d={});this.setOptions(d);if(!(c.data("PIA-initialized")||0<a(a.fn.postitall.globals.prefix+d.id).length)){d=a.extend(this.options,d);this.setOptions(d);c.attr("id",a.fn.postitall.globals.prefix.substring(1)+d.id);c=this.create(c);if(a.fn.postitall.globals.autoPosition&&d.features.autoPosition)a(l).on("resize",a.proxy(this.relativePosition,this));return c}},attachedTo:function(c){var d=
this,b=c;b===f&&(b=d.options);c=a(a.fn.postitall.globals.prefix+b.id);var e=function(b){var c=b.attr("id");if(c)return"#"+c;(c=b.parents().map(function(){return this.tagName}).get().reverse().join(" "))&&(c+=" "+b[0].nodeName);var d=b.attr("class");d&&(c+="."+a.trim(d).replace(/\s/gi,"."));(d=b.attr("name"))&&(c+="[name='"+d+"']");d||(b=b.index())&&(c+=":nth-child("+(b+1)+")");return c};if(b.attachedTo===f||"object"!==typeof b.attachedTo)b.attachedTo={};if(b.attachedTo.element!==f&&("object"===typeof b.attachedTo.element&&
(b.attachedTo.element=e(b.attachedTo.element)),"string"===typeof b.attachedTo.element&&""!==b.attachedTo.element&&0<a(""+b.attachedTo.element).length)){e=a(""+b.attachedTo.element).first();var g={};g=this.elementOrParentIsFixed(b.attachedTo.element)?e.position():e.offset();b.attachedTo.arrow===f&&(b.attachedTo.arrow=!0);if(b.attachedTo.position===f||""===b.attachedTo.position)b.attachedTo.position="right middle";var k=b.attachedTo.position.split(" "),p=k[0];k=k[1];var n=e.width()+parseInt(e.css("padding-left"),
10)+parseInt(e.css("padding-right"),10),h=e.height()+parseInt(e.css("padding-top"),10)+parseInt(e.css("padding-bottom"),10),q=parseInt(c.width(),10)+parseInt(c.css("padding-left"),10)+parseInt(c.css("padding-right"),10),r=parseInt(c.height(),10)+parseInt(c.css("padding-top"),10)+parseInt(c.css("padding-bottom"),10),w=20;b.useCssProperties&&""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note&&(isNaN(parseInt(d.getCssClassProperty(b.cssclases.note,"border-width")))||(w+=
parseInt(d.getCssClassProperty(b.cssclases.note,"border-width"),10)));var x=function(c){var e=self.pageYOffset||m.documentElement.scrollTop||m.body.scrollTop;b.posY<e?(b.posY=g.top+w,b.attachedTo.arrow&&"top"!==b.style.arrow&&(b.style.arrow="top",d.hideArrow(b.id,b)),null!=c&&setTimeout(function(){c()},100)):b.posY+b.height>e+a(l).height()&&(b.posY=g.top+h-r-w,b.attachedTo.arrow&&"bottom"!==b.style.arrow&&(b.style.arrow="bottom",d.hideArrow(b.id,b)),null!=c&&setTimeout(function(){c()},100))},t=function(c){var e=
b.posX;"right"===p&&(e+=q);0>e?(b.posX=g.left+w,b.attachedTo.arrow&&"left"!==b.style.arrow&&(b.style.arrow="left",d.hideArrow(b.id,b)),null!=c&&setTimeout(function(){c()},100)):e>a(l).width()&&(b.posX=g.left+n-b.width-w-u(),b.attachedTo.arrow&&"right"!==b.style.arrow&&(b.style.arrow="right",d.hideArrow(b.id,b)),null!=c&&setTimeout(function(){c()},100))},u=function(){var b=a("<div>").css({visibility:"hidden",width:94,overflow:"scroll"}).appendTo("body"),c=a("<div>").css({width:"100%"}).appendTo(b).outerWidth();
b.remove();return 100-c},v=function(){0<a(a.fn.postitall.globals.prefix+b.id).length&&a(a.fn.postitall.globals.prefix+b.id).animate({top:b.posY,left:b.posX},200,function(){"none"!==b.style.arrow&&d.showArrow(b.id,b)})};switch(p){case "top":b.posY=g.top-r-w;b.posX="left"===k?g.left+.1*n-b.width/2:"right"===k?g.left+(n-.1*n)-b.width/2:g.left+n/2-b.width/2;b.attachedTo.arrow&&"bottom"!==b.style.arrow&&(b.style.arrow="bottom",d.hideArrow(b.id,b));break;default:b.posX=g.left+n+w;b.posY="top"===k?g.top+
.1*h-b.height/2:"bottom"===k?g.top+(h-.1*h)-b.height/2:g.top+h/2-b.height/2;b.attachedTo.arrow&&"left"!==b.style.arrow&&(b.style.arrow="left",d.hideArrow(b.id,b));break;case "bottom":b.posY=g.top+h+w;b.posX="left"===k?g.left+.1*n-b.width/2:"right"===k?g.left+(n-.1*n)-b.width/2:g.left+n/2-b.width/2;b.attachedTo.arrow&&"top"!==b.style.arrow&&(b.style.arrow="top",d.hideArrow(b.id,b));break;case "left":b.posX=g.left-q-w,b.posY="top"===k?g.top+.1*h-b.height/2:"bottom"===k?g.top+(h-.1*h)-b.height/2:g.top+
h/2-b.height/2,b.attachedTo.arrow&&"right"!==b.style.arrow&&(b.style.arrow="right",d.hideArrow(b.id,b))}"left"===p||"right"===p?t(function(){x()}):("top"===p||"bottom"===p)&&x(function(){t()});b.attachedTo.fixed===f&&(b.attachedTo.fixed=!0);setTimeout(function(){v()},200)}},save:function(c,d){c=c.data("PIA-options");if(a.fn.postitall.globals.savable||c.features.savable)c.features.savable=!0,this.saveOptions(c,d)},saveOptions:function(c,d){c===f&&(c=this.options);(a.fn.postitall.globals.savable||c.features.savable)&&
t.add(c,function(a){""!==a?null!=d&&d(a):null!=d&&d()});c.onChange(a.fn.postitall.globals.prefix+c.id)},destroy:function(c,d){c===f&&(c=a(a.fn.postitall.globals.prefix+this.options.id));d===f&&(d=!0);var b=c.data("PIA-options"),e=b.id;if(a.fn.postitall.globals.savable||b.features.savable)b.features.savable?(t.remove(e),b.onChange(a.fn.postitall.globals.prefix+e)):t.get(e,function(c){null!=c&&""!==c&&t.remove(e);b.onChange(a.fn.postitall.globals.prefix+e)});this.remove(b);if(d)b.onDelete(a.fn.postitall.globals.prefix+
e)},remove:function(c){a(a.fn.postitall.globals.prefix+c.id).removeData("PIA-id").removeData("PIA-initialized").removeData("PIA-settings").animate({opacity:0,height:0},function(){a(this).remove()});0>=this.length&&a(l).off("resize")},hide:function(c){if(a(a.fn.postitall.globals.prefix+c).length){var d=a(a.fn.postitall.globals.prefix+c).data("PIA-options");d.flags.hidden=!0;a(a.fn.postitall.globals.prefix+c).slideUp();this.saveOptions(d)}},show:function(c){if(a(a.fn.postitall.globals.prefix+c).length){var d=
a(a.fn.postitall.globals.prefix+c).data("PIA-options");d.flags.hidden=!1;d.features.hideUntil=null;a(a.fn.postitall.globals.prefix+c).slideDown();this.saveOptions(d)}},showAgain:function(a,d){var b=this,c=function(a,b){var c=(new Date).getTime();b=b.getTime()-c;return setTimeout(a,b)};d=new Date(d);d>Date.now()?c(function(){b.show(a)},d):b.show(a)},arrowChangeOption:function(c){var d=this.options.id,b=this.options;if("none"!==a.fn.postitall.globals.addArrow||"none"!==b.features)return b.style.arrow===
c||"none"===c?(b.style.arrow="none",a(".selectedArrow_"+d).show(),a(".selectedArrow_"+d).find("span").show()):(b.style.arrow=c,a(".selectedArrow_"+d).hide()),a("#idAddArrow_"+d).val(b.style.arrow),this.hideArrow(d,b),this.showArrow(d,b),this.saveOptions(b),b},hideArrow:function(c,d){var b=this.options.id;c!==f&&(b=c);c=this.options;d!==f&&(c=d);d=c.cssclases.arrows.top+" "+c.cssclases.arrows.right+" "+c.cssclases.arrows.bottom+" "+c.cssclases.arrows.left;a(a.fn.postitall.globals.prefix+b).removeClass(d,
1E3,"easeInElastic");a(a.fn.postitall.globals.prefix+b).find(".icon_box").hide();a.ui||a(a.fn.postitall.globals.prefix+b).css("overflow","hidden").css("resize","both")},showArrow:function(c,d){var b=this.options.id;c!==f&&(b=c);c=this.options;d!==f&&(c=d);switch(c.style.arrow){case "top":a(a.fn.postitall.globals.prefix+b).addClass(c.cssclases.arrows.top,1E3,"easeInElastic").css("overflow","").css("resize","");break;case "right":a(a.fn.postitall.globals.prefix+b).addClass(c.cssclases.arrows.right,
1E3,"easeInElastic").css("overflow","").css("resize","");break;case "bottom":a(a.fn.postitall.globals.prefix+b).addClass(c.cssclases.arrows.bottom,1E3,"easeInElastic").css("overflow","").css("resize","");break;case "left":a(a.fn.postitall.globals.prefix+b).addClass(c.cssclases.arrows.left,1E3,"easeInElastic").css("overflow","").css("resize","")}"none"===c.style.arrow&&a(a.fn.postitall.globals.prefix+b).find(".icon_box").show();d=a(a.fn.postitall.globals.prefix+b).find('div[data-value="'+c.style.arrow+
'"]');d.show();d.find("span").hide()},autoresize:function(){var c=this.options.id,d=this.options,b=a(a.fn.postitall.globals.prefix+c);if(!d.flags.minimized&&!d.flags.expand){var e=parseInt(b.find("."+d.cssclases.icons.topToolbar).height(),10);e=parseInt(b.find(".PIAeditable").height(),10)+e;b.css("left");b.css("top");var g=parseInt(b.css("width"),10),f=parseInt(b.css("height"),10),p=parseInt(b.find(".trumbowyg-button-pane").height(),10);if(isNaN(p)||30>=p)p=35;e>f-30?f=e+p:e>d.minHeight&&(f=e+p);
d.height=f;b.css("height",f);d.width=g;a("#pia_editable_"+c).is(":focus")||""!==d.attachedTo.element&&d.attachedTo.fixed&&this.attachedTo()}},getIndex:function(c,d){if(c){var b=!1;t.getlength(function(c){var e=a(".PIApostit").length,f=c+e+1;for(c=1;c<=f;c++)(function(c){t.get(c,function(e){!b&&(null==e||""===e)&&0>=a("#idPostIt_"+c).length&&(b=!0);null!=d&&(b||c>=f)&&(d(c),d=null)})})(c)})}else d(this.guid())},setOptions:function(c,d){var b=this;"object"!==typeof c&&(c={});d===f&&(d=!1);b.options=
a.extend(b.options,c);a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,c){"function"!==typeof b.options[c]&&(b.options[c]=function(){return f})});d&&this.saveOptions(b.options)},getSelectedText:function(){var a="";l.getSelection?a=l.getSelection():m.selection&&(a=m.selection.createRange().text);return a},getSelectedHtml:function(){var a="";if("undefined"!==typeof l.getSelection){var d=l.getSelection();if(d.rangeCount){a=m.createElement("div");for(var b=0,e=d.rangeCount;b<e;++b)a.appendChild(d.getRangeAt(b).cloneContents());
a=a.innerHTML}}else"undefined"!==typeof m.selection&&"Text"===m.selection.type&&(a=m.selection.createRange().htmlText);return a},getOSName:function(){var a="Unknown OS",d=this.options.osname;-1!==d.indexOf("Win")&&(a="Windows");-1!==d.indexOf("Mac")&&(a="MacOS");-1!==d.indexOf("X11")&&(a="UNIX");-1!==d.indexOf("Linux")&&(a="Linux");return a},switchBackNoteOn:function(c){var d=this.options.id;a("#the_lights").data("highlightedId",d);this.enableKeyboardNav();a("#idPostIt_"+d+" > .PIAback").css("visibility",
"visible");a(a.fn.postitall.globals.prefix+d).addClass("PIAflip "+c,function(){a(a.fn.postitall.globals.prefix+d+" > .PIAfront").css("visibility","hidden");a(a.fn.postitall.globals.prefix+d+" > .ui-resizable-handle").css("visibility","hidden")});a.fn.postitall.globals.resizable&&a.ui&&a(a.fn.postitall.globals.prefix+d).resizable("disable");a.fn.postitall.globals.draggable&&a.ui&&setTimeout(function(){a(a.fn.postitall.globals.prefix+d).draggable({disabled:!0}).removeClass("ui-state-disabled")},500)},
switchBackNoteOff:function(c){var d=this.options.id;a("#the_lights_close").click();this.disableKeyboardNav();a("#idPostIt_"+d+" > .PIAfront").css("visibility","visible");a(a.fn.postitall.globals.prefix+d).removeClass("PIAflip "+c,function(){a(a.fn.postitall.globals.prefix+d+" > .PIAback").css("visibility","hidden");a(a.fn.postitall.globals.prefix+d+" > .ui-resizable-handle").css("visibility","")});a.fn.postitall.globals.resizable&&a.ui&&a(a.fn.postitall.globals.prefix+d).resizable("enable");a.fn.postitall.globals.draggable&&
a.ui&&setTimeout(function(){a(a.fn.postitall.globals.prefix+d).draggable({disabled:!1});a("#idDateBackToolbar_"+d).show()},500)},switchTrasparentNoteOn:function(){var c=this.options.id,d=this.getRGBComponents(this.options.style.backgroundcolor);a(a.fn.postitall.globals.prefix+c).css("background-color","rgba("+d.R+", "+d.G+", "+d.B+", 0.8)")},switchTrasparentNoteOff:function(){var c=this.options.id,d=this.getRGBComponents(this.options.style.backgroundcolor);a(a.fn.postitall.globals.prefix+c).css("background-color",
"rgba("+d.R+", "+d.G+", "+d.B+", 1)")},switchOffLights:function(){var c=this,d=c.options.id;d!==f&&a(a.fn.postitall.globals.prefix+d).css({"z-index":999,"box-shadow":"rgb(192, 195, 155) 1px 1px 10px 3px"});setTimeout(function(){a("#the_lights").fadeTo("fast",.6,function(){a("#the_lights").css("display","block");a("#the_lights").css({height:a(m).height()+"px"});a("#the_lights").css({width:a(m).width()+"px"});a("#the_lights").data("highlightedId",d);var b=[self.pageXOffset||m.documentElement.scrollLeft||
m.body.scrollLeft,self.pageYOffset||m.documentElement.scrollTop||m.body.scrollTop];a("html").data("scroll-position",b);a("html").data("previous-overflow",a("html").css("overflow"));a("html").css("overflow","hidden");a(l).on("resize",a.proxy(c.resizeAction,c));l.scrollTo(b[0],b[1])})},500)},switchOnLights:function(){var c=a("#the_lights").data("highlightedId"),d=a(a.fn.postitall.globals.prefix+c).data("PIA-options");""!==c&&null!==d&&d!==f&&(a("#the_lights").data("highlightedId",""),a(a.fn.postitall.globals.prefix+
c).css({"z-index":995,"box-shadow":""}),d.flags.expand?a("#pia_expand_"+c).click():a("#pia_close_"+c).click());if("none"!==a("#the_lights").css("display")&&(a("#the_lights").css("display","block"),a("#the_lights").fadeTo("slow",0,function(){a("#the_lights").css("display","none")}),c=a("html").data("scroll-position"),c!=f&&(d=a("html").data("previous-overflow"),a("html").css("overflow","hidden"!==d?d:"visible"),l.scrollTo(c[0],c[1])),a(l).off("resize"),a.fn.postitall.globals.autoPosition))a(l).on("resize",
a.proxy(this.relativePosition,this))},switchOffLightsResize:function(){a("#the_lights").css({height:a(m).height()+"px"})},enableKeyboardNav:function(c){this.callback=c;a(m).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},disableKeyboardNav:function(){a(m).off("keyup.keyboard")},keyboardAction:function(a){a=a.keyCode;String.fromCharCode(a).toLowerCase();27===a&&(this.callback!==f&&this.callback(),this.switchOnLights(),this.disableKeyboardNav())},resizeAction:function(c){var d=this;delay(function(){var b=
a("#the_lights").data("highlightedId");b!==f&&""!==b&&(d.switchOffLightsResize(),a(a.fn.postitall.globals.prefix+b).data("PIA-options").flags.expand&&a(a.fn.postitall.globals.prefix+b).css({top:"10px"}).animate({height:a(l).height()-30,width:a(l).width()-30}))},500)},relativePosition:function(c){var d=this;if(a.fn.postitall.globals.autoPosition&&d.options.features.autoPosition){var b,e;delay(function(){a(".PIApostit").each(function(c,k){b=a(a.fn.postitall.globals.prefix+a(k).data("PIA-id"));e=a(a.fn.postitall.globals.prefix+
a(k).data("PIA-id")).data("PIA-options");if(e!==f&&e.attachedTo.element!==f&&""!==e.attachedTo.element)e.attachedTo.fixed!==f&&e.attachedTo.fixed&&d.attachedTo(e);else{var g=b.offset();a(l).height();c=a(l).width();g=g.left;parseInt(a(k).css("width"),10);parseInt(a(k).css("padding-left"),10);parseInt(a(k).css("padding-right"),10);parseInt(a(k).css("height"),10);parseInt(a(k).css("padding-top"),10);parseInt(a(k).css("padding-bottom"),10);c=g/c*100;a(k).css({left:c+"%"});e.posX=b.offset().left}b.data("PIA-options",
e)})},100)}else a(l).off("resize")},saveOldPosition:function(){var c=a(a.fn.postitall.globals.prefix+this.options.id),d=c.css("left");this.options.oldPosition!==f&&this.options.oldPosition.leftMinimized!==f&&(d=this.options.oldPosition.leftMinimized);c={position:c.css("position"),left:c.css("left"),top:c.css("top"),height:c.css("height"),width:c.css("width"),leftMinimized:d};this.options.oldPosition=c;this.setOptions(this.options,!0)},scrollToNotePosition:function(c,d,b,e,g){var k=self.pageYOffset||
m.documentElement.scrollTop||m.body.scrollTop,p=k+a(l).height();c=parseInt(c,10);var n=c+parseInt(d,10),h=self.pageXOffset||m.documentElement.scrollLeft||m.body.scrollLeft,q=h+a(l).width();b=parseInt(b,10);var r=b+parseInt(e,10);c>k&&n<p&&b>h&&r<q?g!==f&&g():(a("html, body").animate({scrollTop:c-parseInt(d,10),scrollLeft:b-parseInt(e,10)},400),setTimeout(function(){g!==f&&g()},500))},restoreOldPosition:function(c,d){c===f&&(c=!1);var b=this,e=b.options,g=e.id,k=function(){"absolute"===e.oldPosition.position?
a(a.fn.postitall.globals.prefix+g).css({top:parseInt(a(a.fn.postitall.globals.prefix+g).css("top"),10)+a(m).scrollTop()}):a(a.fn.postitall.globals.prefix+g).css({top:a(a.fn.postitall.globals.prefix+g).css("top")});a(a.fn.postitall.globals.prefix+g).css({position:"absolute",bottom:"auto"});setTimeout(function(){a(a.fn.postitall.globals.prefix+g).animate({top:e.oldPosition.top,left:e.oldPosition.left,width:e.oldPosition.width,height:e.oldPosition.height},500,function(){b.showArrow(g,e);a(this).find(".PIAeditable").css("height",
"auto");b.autoresize();e.flags.blocked?(e.flags.blocked=!1,b.blockNote()):b.hoverOptions(g,!0);b.switchTrasparentNoteOff();b.switchOnLights();d!==f&&d()}).css({position:e.oldPosition.position})},100)};c&&"fixed"!==e.position?b.scrollToNotePosition(e.oldPosition.top,e.height,e.oldPosition.left,e.width,k):k()},toogleToolbar:function(c,d){for(var b=this.options,e=b.id,g="",f=0;f<d.length;f++)g=d[f].substring(0,1),"#"!==g&&"."!==g?g="#":d[f]=d[f].substring(1),"hide"===c?a(g+d[f]+e).fadeTo(0,0,function(){a(this).hide()}):
a(g+d[f]+e).fadeTo(0,1,function(){a(this).show()});"hide"===c?(a.fn.postitall.globals.resizable&&b.features.resizable&&a.ui&&a(a.fn.postitall.globals.prefix+e).resizable("disable"),a.fn.postitall.globals.draggable&&b.features.draggable&&(a.ui&&a(a.fn.postitall.globals.prefix+e).draggable("disable").removeClass("ui-state-disabled"),a("#pia_toolbar_"+e).css("cursor","inherit"))):(a.fn.postitall.globals.resizable&&b.features.resizable&&a.ui&&a(a.fn.postitall.globals.prefix+e).resizable("enable"),a.fn.postitall.globals.draggable&&
b.features.draggable&&(a.ui&&a(a.fn.postitall.globals.prefix+e).draggable("enable"),a("#pia_toolbar_"+e).css("cursor","move")),this.hoverState=!0)},expandNote:function(){var c=this.options.id,d=this.options;a("#the_lights_close").hide();a("#pia_expand_"+c).removeClass(d.cssclases.icons.expand).addClass(d.cssclases.icons.minimize);this.hoverOptions(c,!1);this.saveOldPosition();this.toogleToolbar("hide","idPIAIconBottom_ idInfo_ pia_config_ pia_fixed_ pia_delete_ pia_blocked_ pia_minimize_ pia_new_ pia_hidden_".split(" "));
this.hideArrow(c,d);this.switchTrasparentNoteOn();this.switchOffLights();a(a.fn.postitall.globals.prefix+c).css({top:"10px",position:"fixed"}).animate({height:a(l).height()-30,width:a(l).width()-30,top:"10px",left:"10px"},500,function(){a(".PIApostit").css("z-index",995);a(this).css("z-index","999");a("#pia_editable_"+c).css("height",a(l).height()-120);a("#pia_editable_"+c).focus()});d.flags.expand=!0;this.enableKeyboardNav();this.saveOptions(d)},collapseNote:function(){var c=this.options.id,d=this.options;
a("#the_lights_close").show();a("#pia_expand_"+c).removeClass(d.cssclases.icons.minimize).addClass(d.cssclases.icons.expand);a(a.fn.postitall.globals.prefix+c).css("position",d.position);this.toogleToolbar("show","idPIAIconBottom_ idInfo_ pia_config_ pia_fixed_ pia_delete_ pia_blocked_ pia_minimize_ pia_new_ pia_hidden_".split(" "));this.restoreOldPosition();d.flags.expand=!1;this.saveOptions(d)},minimizeNote:function(){var c=this,d=c.options.id,b=c.options,e=a(a.fn.postitall.globals.prefix+d);if(a.fn.postitall.globals.minimized&&
b.features.minimized){var f=function(){c.hoverOptions(d,!1);a("#pia_editable_"+d).hide();a("#pia_minimize_"+d).removeClass(b.cssclases.icons.minimize).addClass(b.cssclases.icons.maximize);b.flags.minimized=!0;var f=" "+a("#pia_editable_"+d).text();18<f.length&&(f=f.substring(0,15)+"...");f=a('<div id="pia_minimized_text_'+d+'" class="PIAminimizedText" />').text(f);a("#pia_toolbar_"+d).append(f);a("#pia_minimize_"+d).attr("title","Restore note");c.toogleToolbar("hide","idPIAIconBottom_ idInfo_ pia_config_ pia_fixed_ pia_delete_ pia_blocked_ pia_expand_ pia_new_ pia_hidden_".split(" "));
a.fn.postitall.globals.draggable&&b.features.draggable&&a.ui&&(e.draggable("enable"),e.draggable({axis:"x"}));c.saveOldPosition();var g=function(){a(a.fn.postitall.globals.prefix+d).animate({width:b.minWidth+20,height:"20px",bottom:"0",left:b.oldPosition.leftMinimized},500,function(){c.hideArrow(d,b);c.switchTrasparentNoteOn();a(a.fn.postitall.globals.prefix+d).css({position:"fixed"})}).css({top:"auto"})};a(a.fn.postitall.globals.prefix+d).css({position:"fixed"});"absolute"==b.position&&a(a.fn.postitall.globals.prefix+
d).css({top:parseInt(b.posY,10)-a(m).scrollTop()});setTimeout(function(){g()},100)};b.flags.minimized?function(){c.restoreOldPosition(!0,function(){a("#pia_editable_"+d).show();a("#pia_minimize_"+d).removeClass(b.cssclases.icons.maximize).addClass(b.cssclases.icons.minimize);b.flags.minimized=!1;c.toogleToolbar("show","idPIAIconBottom_ idInfo_ pia_config_ pia_fixed_ pia_delete_ pia_blocked_ pia_expand_ pia_new_ pia_hidden_".split(" "));a("#pia_minimized_text_"+d).remove();a("#pia_minimize_"+d).attr("title",
"Minimize note");a.fn.postitall.globals.draggable&&b.features.draggable&&a.ui&&e.draggable({axis:"none"});c.switchTrasparentNoteOff()})}():f();c.save(e)}},blockNote:function(){var c=this.options.id,d=this.options,b=a(a.fn.postitall.globals.prefix+c);if(a.fn.postitall.globals.blocked&&d.features.blocked){var e="pia_config_ pia_fixed_ pia_delete_ pia_hidden_ idPIAIconBottom_ .selectedArrow_".split(" ");d.flags.expand||e.push("pia_expand_");d.flags.minimized||e.push("pia_minimize_");d.flags.blocked?
(a("#pia_blocked_"+c.toString()).removeClass(d.cssclases.icons.blockedOn).addClass(d.cssclases.icons.blocked).attr("title","Block note"),a("#pia_editable_"+c.toString()).attr("contenteditable",!0).css("cursor",""),this.toogleToolbar("show",e),this.hoverOptions(c,!0),d.flags.blocked=!1):(a("#pia_blocked_"+c.toString()).removeClass(d.cssclases.icons.blocked).addClass(d.cssclases.icons.blockedOn).attr("title","Unblock note"),a("#pia_editable_"+c.toString()).attr("contenteditable",!1).css("cursor","auto"),
this.hoverOptions(c,!1),this.toogleToolbar("hide",e),d.flags.blocked=!0);this.save(b)}},fixNote:function(){var c=this.options.id,d=this.options,b=a(a.fn.postitall.globals.prefix+c);d.flags.fixed?(a("#pia_fixed_"+c).removeClass(d.cssclases.icons.fixedOn).addClass(d.cssclases.icons.fixed).attr("title","Fix note"),d.position="absolute",d.posY=b.offset().top,b.removeClass("fixed"),d.attachedTo.element="",d.flags.fixed=!1):(a("#pia_fixed_"+c).removeClass(d.cssclases.icons.fixed).addClass(d.cssclases.icons.fixedOn).attr("title",
"Unfix note"),d.position="fixed",d.posY=parseInt(d.posY,10)-a(m).scrollTop(),b.addClass("fixed"),b.css("z-index",996),d.flags.fixed=!0);b.css("position",d.position);b.css("top",parseInt(d.posY,10)+"px");this.setOptions(d);this.save(b)},hoverOptions:function(c,d){if(a.fn.postitall.globals.toolbar&&this.options.features.toolbar){a.fn.postitall.globals.autoHideToolBar&&this.options.features.autoHideToolBar||(d=!1);var b=this;d?setTimeout(function(){a(a.fn.postitall.globals.prefix+c).hover(function(){a(a.fn.postitall.globals.prefix+
c).find(".PIAfront").find("."+b.options.cssclases.icons.icon).fadeTo(200,1);b.options.style.arrow!==f&&"none"!==b.options.style.arrow||a(a.fn.postitall.globals.prefix+c).find(".icon_box").fadeTo(600,1);a(a.fn.postitall.globals.prefix+c+" > .ui-resizable-handle").fadeTo(200,1);b.hoverState=!0},function(){setTimeout(function(){b.hoverState||(a(a.fn.postitall.globals.prefix+c).find(".PIAfront").find("."+b.options.cssclases.icons.icon).fadeTo(600,0),a(a.fn.postitall.globals.prefix+c).find(".icon_box").fadeTo(600,
0),a(a.fn.postitall.globals.prefix+c+" > .ui-resizable-handle").fadeTo(600,0))},400);b.hoverState=!1});b.hoverState||(a(a.fn.postitall.globals.prefix+c).find(".PIAfront").find("."+b.options.cssclases.icons.icon).fadeTo(600,0),a(a.fn.postitall.globals.prefix+c).find(".icon_box").fadeTo(600,0),a(a.fn.postitall.globals.prefix+c+" > .ui-resizable-handle").fadeTo(600,0))},100):(b.hoverState=!1,a(a.fn.postitall.globals.prefix+c).unbind("mouseenter mouseleave"),b.options.style.arrow!==f&&"none"!==b.options.style.arrow||
a(a.fn.postitall.globals.prefix+c).find(".icon_box").fadeTo(600,1),a(a.fn.postitall.globals.prefix+c).find(".PIAfront").find("."+b.options.cssclases.icons.icon).fadeTo(200,1))}},getCssClassProperty:function(c,d,b){var e="";b===f&&(b=!0);if(""!==c){var g=a("<div />").css({visibility:"hidden"});g.appendTo("body");b&&g.hide();"."===c.charAt(0)?g.addClass(c.substr(1)):"#"===c.charAt(0)?g.attr("id",c.substr(1)):g.addClass(c);e=g.css(d);g.remove()}return e},selectorExists:function(a){a:{a="."+a;for(var c=
[],b=0;b<m.styleSheets.length;b++)try{var e=m.styleSheets[b].rules||m.styleSheets[b].cssRules,f;for(f in e)"string"===typeof e[f].selectorText&&c.push(e[f].selectorText)}catch(k){}for(e=0;e<c.length;e++)if(c[e]===a){a=!0;break a}a=!1}return a},getRandomColor:function(c){if(c.useCssProperties&&""!==c.cssclases.note&&c.cssclases.note!==a.fn.postitall.defaults.cssclases.note&&(c=this.getCssClassProperty(c.cssclases.note,"background-color"),""!==c&&"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c))return this.getHexComponents(c);
c=a.fn.postitall.globals.randomColor&&a.fn.postitall.defaults.features.randomColor?"#"+(16777215*Math.random()<<0).toString(16):a.fn.postitall.defaults.style.backgroundcolor;if(7>c.length){var d=Array(7-c.length+1).join("0");c+=d.toString()}return c},getTextColor:function(c){var d=c.style.backgroundcolor;if(a.fn.postitall.globals.randomColor&&a.fn.postitall.defaults.features.randomColor)return c=this.getRGBComponents(d),105>255-(.299*c.R+.587*c.G+.114*c.B)?"#111111":"#eeeeee";if(c.useCssProperties&&
""!==c.cssclases.note&&c.cssclases.note!==a.fn.postitall.defaults.cssclases.note){if(c=this.getCssClassProperty(c.cssclases.note,"color"),""!==c&&"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c)return this.getHexComponents(c)}else return a.fn.postitall.defaults.style.textcolor},getTextShadowStyle:function(a,d){a=this.getRGBComponents(a);return 105>255-(.299*a.R+.587*a.G+.114*a.B)?d.withTextShadowBlack:d.withTextShadowWhite},getRGBComponents:function(a){if(a!==f){var c=a.substring(1,3),b=a.substring(3,5);
a=a.substring(5,7);return{R:parseInt(c,16),G:parseInt(b,16),B:parseInt(a,16)}}},getHexComponents:function(a){function c(a){return("0"+parseInt(a).toString(16)).slice(-2)}if("rgba(0, 0, 0, 0)"===a)return"";a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+c(a[1])+c(a[2])+c(a[3])},guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},elementOrParentIsFixed:function(c){c=a(c);var d=!1;c.add(c.parents()).each(function(){if("fixed"===
a(this).css("position"))return d=!0,!1});return d},create:function(c){var d=this,b=d.options,e=b.id.toString();c.data("PIA-id",e).data("PIA-initialized",!0).data("PIA-options",b);""===b.content&&""!==c.html()&&(b.content=c.html());var g="cursor: inherit;";a.fn.postitall.globals.draggable&&b.features.draggable&&(g="cursor: move;");g=a("<div />",{id:"pia_toolbar_"+e,"class":b.cssclases.icons.topToolbar,style:g});a.ui||a.fn.postitall.globals.draggable&&b.features.draggable&&g.drags();a.fn.postitall.globals.removable&&
b.features.removable&&g.append(a("<div />",{id:"pia_delete_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconRight+" "+b.cssclases.icons.delete,css:"margin-right: 10px"}).click(function(f){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):a.fn.postitall.globals.askOnDelete&&b.features.askOnDelete?0>=a(this).parent().find(".ui-widget2").length&&(a(".backContent_"+e).hide(),a("#idBackDelete_"+e+" > .PIABox").css({height:b.height-40}),a("#idBackDelete_"+e).show(),d.switchBackNoteOn("PIAflip2"),
d.switchOffLights()):d.destroy();f.preventDefault()}).attr("title",tjs.get("Delete note")));a.fn.postitall.globals.changeoptions&&b.features.changeoptions&&g.append(a("<div />",{id:"pia_config_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconRight+" "+b.cssclases.icons.config}).click(function(f){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):(a(".backContent_"+e).hide(),a("#idBackConfig_"+e+" > .PIABox").css({height:b.height-40}),a("#idBackConfig_"+e).show(),d.switchBackNoteOn("PIAflip2"));
f.preventDefault()}).attr("title",tjs.get("Configure note")));a.fn.postitall.globals.fixed&&b.features.fixed&&g.append(a("<div />",{id:"pia_fixed_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconLeft+" "+(b.flags.fixed?b.cssclases.icons.fixedOn:b.cssclases.icons.fixed)+" "}).click(function(a){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):d.fixNote();a.preventDefault()}).attr("title",b.flags.fixed?"Unfix note":"Fix note"));a.fn.postitall.globals.hidden&&b.features.hidden?g.append(a("<div />",
{id:"pia_hidden_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconLeft+" "+b.cssclases.icons.hide}).click(function(f){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):a.fn.postitall.globals.askOnHide&&b.features.askOnHide?(a(".backContent_"+e).hide(),a("#idHideUntil_"+e+" > .PIABox").css({height:b.height-40}),a("#idHideUntil_"+e).show(),d.switchBackNoteOn("PIAflip2")):d.hide(e);f.preventDefault()}).attr("title",tjs.get("Hide note"))):b.flags.hidden=!1;a.fn.postitall.globals.minimized&&
b.features.minimized?g.append(a("<div />",{id:"pia_minimize_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconLeft+" "+(b.flags.minimized?b.cssclases.icons.maximize:b.cssclases.icons.minimize)}).click(function(a){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):d.minimizeNote();a.preventDefault()}).attr("title",tjs.get("Minimize note"))):b.flags.minimized=!1;a.fn.postitall.globals.expand&&b.features.expand?g.append(a("<div />",{id:"pia_expand_"+e,"class":b.cssclases.icons.icon+" "+
b.cssclases.icons.iconLeft+" "+(b.flags.expand?b.cssclases.icons.maximize:b.cssclases.icons.expand)}).click(function(a){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):b.flags.expand?d.collapseNote():d.expandNote();a.preventDefault()}).attr("title",tjs.get("Maximize note"))):b.flags.expand=!1;a.fn.postitall.globals.blocked&&b.features.blocked&&g.append(a("<div />",{id:"pia_blocked_"+e,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconRight+" "+(b.flags.blocked?b.cssclases.icons.blockedOn:
b.cssclases.icons.blocked),css:"margin-right: 10px"}).click(function(a){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):d.blockNote();a.preventDefault()}).attr("title",b.flags.blocked?"Unblock note":"Block note"));var k=a("<div />",{id:"pia_editable_"+e,"class":"PIAeditable PIAcontent",style:"min-width:"+b.minWidth+"px;box-shadow:none;min-height:"+(b.minHeight-100)+"px;"}).change(function(e){if(a.fn.postitall.globals.editable&&b.features.editable){var g=b.content;e=a(this).text();if(a.fn.postitall.globals.pasteHtml||
b.features.pasteHtml)e=a(this).html(),e=e.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,""),a.htmlClean===f||a.fn.postitall.globals.htmlEditor&&b.features.htmlEditor&&a.trumbowyg||(e=a.htmlClean(e,{format:!0}));d.options.content=e;d.autoresize();d.save(c,function(b){b!==f&&""!==b&&(d.options.content=g,a("#pia_editable_"+d.options.id).html(g),a("#pia_editable_"+d.options.id).trigger("change"),d.autoresize())})}}).html(d.options.content);
a.fn.postitall.globals.editable&&b.features.editable?k.attr("contenteditable",!0):k.attr("contenteditable",!1).css("cursor","auto");var p=!1,n=b.cssclases.icons.icon+" "+b.cssclases.icons.iconLeft+" "+b.cssclases.icons.iconBottom+" ",h=a("<div />",{id:"idPIAIconBottom_"+e,"class":b.cssclases.icons.bottomToolbar});if(a.fn.postitall.globals.showInfo&&b.features.showInfo||a.fn.postitall.globals.addNew&&b.features.addNew||a.fn.postitall.globals.showMeta&&b.features.showMeta&&"undefined"!==typeof b.meta&&
"object"===typeof b.meta){if(a.fn.postitall.globals.showInfo&&b.features.showInfo||a.fn.postitall.globals.showMeta&&b.features.showMeta&&"undefined"!==typeof b.meta&&"object"===typeof b.meta)p=a("<a />",{href:"#",id:"idInfo_"+e,"class":n+b.cssclases.icons.info}).click(function(f){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):(a(".backContent_"+e).hide(),a("#idBackInfo_"+e+" > .PIABox").css({height:b.height-40}),a("#idBackInfo_"+e+" .PIAtab span:nth-of-type(2)").css({width:b.width-30,height:b.height-
60}),a("#idBackInfo_"+e).show(),d.switchBackNoteOn("PIAflip2"),a.fn.postitall.globals.showInfo&&b.features.showInfo&&a.fn.postitall.globals.showMeta&&b.features.showMeta&&"undefined"!==typeof b.meta&&"object"===typeof b.meta&&(a("#idPIAtab-1"+e).click(),a("#idDateBackToolbar_"+e).hide()));f.preventDefault()}).attr("title","View information"),h.append(p);a.fn.postitall.globals.addNew&&b.features.addNew&&(p=a("<a />",{href:"#",id:"pia_new_"+e,"class":n+" "+b.cssclases.icons.copy}).click(function(d){c.hasClass("PIAdragged")?
c.removeClass("PIAdragged"):a.PostItAll.new({content:b.content,posX:parseInt(b.posX,10)+10,posY:parseInt(b.posY,10)+10,width:b.width,height:b.height,features:b.features,attachedTo:b.attachedTo,style:b.style,cssclases:b.cssclases},function(b,c,d){setTimeout(function(){a(".PIApostit").css("z-index",995);a(b).css("z-index",999)},100)});d.preventDefault()}).attr("title","Copy note"),h.append(p));p=!0}a.fn.postitall.globals.exportNote&&b.features.exportNote&&(n=a("<a />",{href:"#",id:"pia_export_"+e,"class":n+
" "+b.cssclases.icons.export}).click(function(b){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):a.PostItAll.export(e);b.preventDefault()}).attr("title","Export note"),h.append(n),p=!0);p&&g.prepend(h);k=a("<div />",{"class":"PIAfront",dir:"ltr"}).append(g).append(k);g=this.__getBPToolbar(e);h=this.__getBPConfig(e);n=this.__getBPDelete(e,c);p=this.__getBPHideUntil(e);var m=this.__getBPMetaData(e);h=a("<div />",{"class":"PIAback PIAback1 PIAback2",style:"visibility: hidden;"}).append(g).append(h).append(n).append(p).append(m);
g=a("<div />",{id:"idPostIt_"+e,"data-id":e});g.append(k);g.append(h);"relative"===b.position&&(b.position="absolute",b.posY=c.offset().top+parseInt(b.posY,10),b.posY+="px",b.posX=c.offset().left+parseInt(b.posX,10),b.posX+="px");n=" ";k=!1;if("none"!==a.fn.postitall.globals.addArrow&&"none"!==b.features.addArrow)switch(n+=b.cssclases.arrows.arrow+" ",b.style.arrow){case "top":n+=b.cssclases.arrows.top;k=!0;break;case "right":n+=b.cssclases.arrows.right;k=!0;break;case "bottom":n+=b.cssclases.arrows.bottom;
k=!0;break;case "left":n+=b.cssclases.arrows.left,k=!0}h=b.cssclases.note;c.removeClass().addClass(h+" PIApostit PIApanel "+(b.style.tresd?b.cssclases.withBoxShadow:b.cssclases.withoutBoxShadow)+("fixed"===b.position?" fixed ":" ")+n).css("background-color",b.style.backgroundcolor).css("color",b.style.textcolor);n=b.style.backgroundcolor;if(b.useCssProperties&&""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note||""===n)h=this.getCssClassProperty(b.cssclases.note,"border-top-color"),
p=this.getCssClassProperty(b.cssclases.note,"color"),""!==h&&h!==p&&"rgba(0, 0, 0, 0)"!==h&&(n=h);c.css("border-bottom-color",n).css("border-left-color",n).css("border-top-color",n).css("border-right-color",n);if(b.useCssProperties&&""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note||""===b.style.fontfamily)h=this.getCssClassProperty(b.cssclases.note,"font-family"),""!==h&&"static"!==h&&(b.style.fontfamily=h);c.css("font-family",b.style.fontfamily);if(b.useCssProperties&&
""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note||""===b.style.fontsize)h=this.getCssClassProperty(b.cssclases.note,"font-size"),""!==h&&"static"!==h&&(b.style.fontsize=h);c.css("font-size",b.style.fontsize);if(b.useCssProperties&&""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note||""===b.position)h=this.getCssClassProperty(b.cssclases.note,"position"),""!==h&&"static"!==h&&(b.position=h);c.css("position",b.position);h=b.width+"px";""!==
b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note&&(b.useCssProperties||""===b.width)&&(h=this.getCssClassProperty(b.cssclases.note,"width")+"px",""===h||0===parseInt(h,10)||parseInt(h,10)<b.minWidth)&&(h=b.width+"px");c.css("width",h);h=b.height+"px";""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note&&(b.useCssProperties||""===b.height)&&(h=this.getCssClassProperty(b.cssclases.note,"height")+"px",""===h||0===parseInt(h,10)||parseInt(h,10)<b.minHeight)&&
(h=b.width+"px");c.css("height",h);h=this.getCssClassProperty(b.cssclases.note,"bottom");"absolute"===b.position?""!==h&&"auto"!==h?(c.css("bottom",parseInt(h,10)),b.posY=c.css("top")):(h=this.getCssClassProperty(b.cssclases.note,"top"),""!==h&&"auto"!==h&&(b.posY=h),c.css("top",b.posY)):("relative"===b.position&&(b.position="absolute",c.css("position",b.position)),""!==h&&"auto"!==h?(c.css("bottom",b.posY+(a(l).height()-parseInt(h,10))),b.posY=c.css("top")):(h=this.getCssClassProperty(b.cssclases.note,
"top"),""!==h&&"auto"!==h&&(b.posY=parseInt(b.posY,10)+parseInt(h,10)),c.css("top",b.posY+"px")));""!==b.cssclases.note&&b.cssclases.note!==a.fn.postitall.defaults.cssclases.note&&b.right===a.fn.postitall.defaults.right?(h=this.getCssClassProperty(b.cssclases.note,"right"),""!==h&&"auto"!==h?(b.right=h,c.css("right",b.right)):(h=this.getCssClassProperty(b.cssclases.note,"left"),""!==h&&"auto"!==h&&(b.posX=h),c.css("left",b.posX))):""!==b.right?c.css("right",b.right):c.css("left",b.posX);b.style.textshadow?
c.addClass(d.getTextShadowStyle(b.style.textcolor,b.cssclases)):c.addClass(b.cssclases.withoutTextShadow);c.html(g).on("focus","#pia_editable_"+e,function(){b.onSelect(a.fn.postitall.globals.prefix+e);if(!b.flags.blocked){if(a.fn.postitall.globals.htmlEditor&&b.features.htmlEditor&&a.trumbowyg){var c=!1;d.toogleToolbar("hide",["idPIAIconBottom_","pia_toolbar_",".selectedArrow_"]);a(a.fn.postitall.globals.prefix+e+" > .ui-resizable-handle").css("visibility","hidden");a("#pia_editable_"+e).trumbowyg({btns:"formatting | btnGrp-design | link | insertImage | btnGrp-justify | btnGrp-lists | horizontalRule | viewHTML".split(" "),
closable:!0,fullscreenable:!1,autogrow:!0,semantic:!0}).on("tbwfocus",function(){}).on("tbwblur",function(){}).on("tbwresize",function(){});a("#pia_editable_"+e).on("tbwclose",function(){a("#pia_editable_"+e).attr("contenteditable",!0);a("#pia_editable_"+e).css("height","auto");d.toogleToolbar("show",["idPIAIconBottom_","pia_toolbar_",".selectedArrow_"]);a(a.fn.postitall.globals.prefix+e+" > .ui-resizable-handle").css("visibility","");d.autoresize();a("#the_lights").data("highlightedId")&&d.collapseNote();
c||(c=!0,delay(function(){b.onRelease(a.fn.postitall.globals.prefix+e)},100))});d.enableKeyboardNav(function(){a(".trumbowyg-close-button").click();d.autoresize()});d.autoresize()}var f=a(this);f.data("before",f.html());return f}}).on("blur keyup paste input","[contenteditable]",function(c){var d=a(this);d.data("before")!==d.html()&&delay(function(){var f=d.text();if(a.fn.postitall.globals.pasteHtml||b.features.pasteHtml)f=d.html();d.data("before",f);d.trigger("change");b.onChange(a.fn.postitall.globals.prefix+
e);c.preventDefault()},100);return d}).click(function(b){a(".PIApostit").css("z-index",995);a(this).css("z-index",999)});a.ui?(a.fn.postitall.globals.draggable&&b.features.draggable&&c.draggable({scroll:!1,start:function(e){a(".PIApostit").css("z-index",995);a(this).css("z-index",999);a(this).draggable("disable").removeClass("ui-state-disabled");b.flags.minimized||d.switchTrasparentNoteOn();""!==b.attachedTo.element&&(b.attachedTo.element="",b.attachedTo.fixed=!1);c.addClass("PIAdragged");b.onSelect(a.fn.postitall.globals.prefix+
b.id)},stop:function(){a(this).draggable("enable");d.autoresize();b.right="";b.flags.minimized?b.oldPosition.leftMinimized=c.css("left"):(b.posY=c.css("top"),b.posX=c.css("left"),b.oldPosition.leftMinimized=f);d.saveOptions(b);b.flags.minimized||d.switchTrasparentNoteOff();delay(function(){c.hasClass("PIAdragged")&&(c.removeClass("PIAdragged"),b.onRelease(a.fn.postitall.globals.prefix+b.id))},200)}}),a.fn.postitall.globals.resizable&&b.features.resizable&&c.resizable({animate:!0,helper:"ui-resizable-helper",
minHeight:b.minHeight,minWidth:b.minWidth,start:function(){d.switchTrasparentNoteOn();a("#pia_editable_"+e).height();b.onSelect(a.fn.postitall.globals.prefix+b.id)},stop:function(){delay(function(){d.autoresize();b.right="";b.posY=c.css("top");b.posX=c.css("left");d.autoresize();d.saveOptions(b);b.onRelease(a.fn.postitall.globals.prefix+b.id)},1E3);d.switchTrasparentNoteOff()}})):a.fn.postitall.globals.resizable&&b.features.resizable&&(c.css("overflow","hidden"),c.css("resize","both"),c.find(".PIAfront").css("height",
"92%"),c.find("."+b.cssclases.icons.bottomToolbar).css("bottom","0%"));a(".backContent_"+b.id).hide();b.style.tresd||a("#generalstyle_"+b.id).click();b.style.textshadow||a("#textshadow_"+b.id).click();a.fn.postitall.globals.fixed&&b.features.fixed&&(b.flags.fixed||"fixed"===b.position)&&(b.flags.fixed=!1,a("#pia_fixed_"+b.id).click());a.fn.postitall.globals.expand&&b.features.expand&&b.flags.expand&&(b.flags.expand=!1,a("#pia_expand_"+b.id).click(),delay(function(){a("#pia_editable_"+b.id).focus()},
500));(a.fn.postitall.globals.blocked||b.features.blocked)&&b.flags.blocked&&(b.flags.blocked=!1,a("#pia_blocked_"+b.id).click());a.fn.postitall.globals.minimized&&b.features.minimized&&b.flags.minimized&&(b.flags.minimized=!1,a("#pia_minimize_"+b.id).click());if("front"===a.fn.postitall.globals.addArrow||"all"===a.fn.postitall.globals.addArrow||"all"===b.features.addArrow||"front"===b.features.addArrow)g=b.cssclases.icons.icon+" "+b.cssclases.icons.iconLeft+" icon_box ",c.append("<div class='"+g+
" icon_box_top selectedArrow_"+e+"' data-index='"+e+"' data-value='top'><span class='ui-icon ui-icon-triangle-1-n'></span></div>"+("<div class='"+g+" icon_box_right selectedArrow_"+e+"' data-index='"+e+"' data-value='right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>")+("<div class='"+g+" icon_box_bottom selectedArrow_"+e+"' data-index='"+e+"' data-value='bottom'><span class='ui-icon ui-icon-triangle-1-s'></span></div>")+("<div class='"+g+" icon_box_left selectedArrow_"+e+"' data-index='"+
e+"' data-value='left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>")),a(".selectedArrow_"+e).click(function(e){c.hasClass("PIAdragged")?c.removeClass("PIAdragged"):b=d.arrowChangeOption(a(this).attr("data-value"));e.preventDefault()});k&&(g=a(a.fn.postitall.globals.prefix+e).find('div[data-value="'+b.style.arrow+'"]'),g.show(),g.find("span").hide());b.flags.highlight&&(b.flags.hidden=!1);b.flags.hidden?null!==b.features.hideUntil&&d.showAgain(e,b.features.hideUntil):c.slideDown(function(){a("#textshadow_"+
e).click(function(){a(this).is(":checked")?(a(this).closest(".PIApostit").find(".PIAcontent").addClass(d.getTextShadowStyle(a("#minicolors_text_"+e).val(),b.cssclases)).removeClass(b.cssclases.withoutTextShadow),b.style.textshadow=!0):(a(this).closest(".PIApostit").find(".PIAcontent").addClass(b.cssclases.withoutTextShadow).removeClass(b.cssclases.withTextShadowWhite).removeClass(b.cssclases.withTextShadowBlack),b.style.textshadow=!1);d.setOptions(b,!0)});a("#generalstyle_"+e).click(function(){a(this).is(":checked")?
(a(a.fn.postitall.globals.prefix+e).removeClass(b.cssclases.withoutBoxShadow).addClass(b.cssclases.withBoxShadow),b.style.tresd=!0):(a(a.fn.postitall.globals.prefix+e).removeClass(b.cssclases.withBoxShadow).addClass(b.cssclases.withoutBoxShadow),b.style.tresd=!1);d.setOptions(b,!0)});var c=function(b,c,d){var e=c.id;c.style.textcolor=d;c.style.textshadow&&a(a.fn.postitall.globals.prefix+e).removeClass(c.cssclases.withTextShadowWhite).removeClass(c.cssclases.withTextShadowBlack).addClass(b.getTextShadowStyle(a("#minicolors_text_"+
e).val(),c.cssclases));b.setOptions(c,!0)};a.minicolors?(a("#minicolors_bg_"+e).minicolors({change:function(c,f){a(a.fn.postitall.globals.prefix+e).css("background-color",c);b.style.backgroundcolor=c;d.setOptions(b,!0)}}),a("#minicolors_text_"+e).minicolors({change:function(f){a(a.fn.postitall.globals.prefix+e).css("color",f);c(d,b,f)}})):(a("#minicolors_bg_"+e).change(function(){a(this).closest(".PIApostit").css("background-color",a(this).val());b.style.backgroundcolor=a(this).val();d.setOptions(b,
!0)}),a("#minicolors_text_"+e).change(function(){a(this).closest(".PIApostit").css("color",a(this).val());c(d,b,a(this).val())}));d.autoresize()});b.flags.minimized||b.flags.expand||b.flags.blocked||d.hoverOptions(e,!0);a.fn.postitall.globals.draggable&&b.features.draggable&&a("#pia_editable_"+e).mouseenter(function(b){a.ui&&c.draggable({disabled:!0}).removeClass("ui-state-disabled")}).mouseleave(function(d){!a.ui||b.flags.blocked||b.flags.expand||c.draggable({disabled:!1})});a("#pia_editable_"+e).bind("paste",
function(c){var g=this;a("#pia_editable_"+e).css("opacity","0");setTimeout(function(){if(a.fn.postitall.globals.pasteHtml&&b.features.pasteHtml){var c=a(g).html();c=c.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,"");a.htmlClean===f||a.fn.postitall.globals.htmlEditor&&b.features.htmlEditor&&a.trumbowyg||(c=a.htmlClean(c,{format:!0}))}else c=a(g).text();a("#pia_editable_"+e).html(c);d.autoresize();a("#pia_editable_"+e).css("opacity",
"1")},100)});a(c).dblclick(function(){b.onDblClick(a.fn.postitall.globals.prefix+e)});a("#pia_editable_"+e).keydown(function(a){a.stopPropagation()});d=this;setTimeout(function(){d.saveOptions(b);b.onCreated(a.fn.postitall.globals.prefix+e,b,c);b.flags.highlight&&d.scrollToNotePosition(b.posY,b.height,b.posX,b.width,function(){d.switchOffLights();d.enableKeyboardNav()})},200);return c},__getBPToolbar:function(c){var d=this,b=d.options,e=new Date(b.created);return a("<div />",{"class":"PIAtoolbarBack"}).append(a("<div />",
{id:"pia_close_"+c,"class":b.cssclases.icons.icon+" "+b.cssclases.icons.iconRight+" "+b.cssclases.icons.close,style:"display:block;"}).click(function(a){d.switchBackNoteOff("PIAflip2");d.switchOnLights();a.preventDefault()}).attr("title","Close")).append(a("<span />",{id:"idDateBackToolbar_"+c,"class":"PIAdateBackToolbar"}).html(e.toLocaleDateString()+" ("+e.toLocaleTimeString()+")"))},__getBPConfig:function(c){var d=this,b=d.options,e="";if(a.fn.postitall.globals.changeoptions){e=a("<label />",{"class":"minicolors_label",
"for":"minicolors_bg_"+c}).html(tjs.get("Background-color:"));var f=a("<input />",{"class":"minicolors",id:"minicolors_bg_"+c,type:"text",height:"14px",style:"font-size:smaller;",value:b.style.backgroundcolor,"data-default-value":b.style.backgroundcolor}),k=a("<label />",{"class":"minicolors_label","for":"minicolors_text_"+c,style:"margin-top: 5px;"}).html(tjs.get("Text color:")),l=a("<input />",{"class":"minicolors",id:"minicolors_text_"+c,type:"text",height:"14px",style:"font-size:smaller;",value:b.style.textcolor,
"data-default-value":b.style.textcolor}),n="";b.style.textshadow&&(n="checked");n=a("<input />",{id:"textshadow_"+c,type:"checkbox",checked:n});n=a("<label />",{"class":"minicolors_label","for":"textshadow_"+c}).append(n).append(tjs.get(" Text shadow"));var h="";b.style.tresd&&(h="checked");h=a("<input />",{id:"generalstyle_"+c,type:"checkbox",checked:h});h=a("<label />",{"class":"minicolors_label","for":"generalstyle_"+c}).append(h).append(tjs.get(" 3D style"));var m="";if("back"===a.fn.postitall.globals.addArrow||
"all"===a.fn.postitall.globals.addArrow||"back"===b.features.addArrow||"all"===b.features.addArrow)m=a("<select />",{id:"idAddArrow_"+c,style:"margin-top: 5px;"}),m.append('<option value="none" '+("none"===b.style.arrow?"selected":"")+">Arrow in:</option>"),m.append('<option value="top" '+("top"===b.style.arrow?"selected":"")+">Top</option>"),m.append('<option value="right" '+("right"===b.style.arrow?"selected":"")+">Right</option>"),m.append('<option value="bottom" '+("bottom"===b.style.arrow?"selected":
"")+">Bottom</option>"),m.append('<option value="left" '+("left"===b.style.arrow?"selected":"")+">Left</option>"),m.change(function(c){b=d.arrowChangeOption(a(this).val());c.preventDefault()});e=a("<div />",{id:"idBackConfig_"+c,"class":"PIAcontent backContent_"+c}).append(a("<div />",{"class":"PIABox PIAconfigBox",height:b.height-40}).append("<div class='PIAtitle'>"+tjs.get("Note config")+"</div>").append(e).append(f).append(h).append(k).append(l).append(n).append(m))}return e},__getBPDelete:function(c,
d){var b=this,e=b.options,f="";a.fn.postitall.globals.askOnDelete&&e.features.askOnDelete&&(f=a("<div />",{id:"idBackDelete_"+c,"class":"PIAcontent backContent_"+c}).append(a("<div />",{id:"pia_confirmdel_"+c,"class":"PIABox PIAwarningBox",height:e.height-40}).append("<div class='PIAtitle'>"+tjs.get("Delete note?")+"</div>").append(a("<span />",{style:"line-height:10px;font-size:10px;","class":"PIAdelwar "+e.cssclases.icons.iconLeft})).append(a("<div />",{"class":"PIAconfirmOpt"}).append(a("<a />",
{id:"sure_delete_"+c,href:"#"}).click(function(a){b.switchOnLights();d.data("PIA-id");b.destroy();a.preventDefault()}).append(a("<span />",{"class":"PIAdelyes"}).append(tjs.get("Delete this"))))).append(a("<div />",{"class":"PIAconfirmOpt"}).append(a("<a />",{id:"all_"+c,href:"#"}).click(function(c){b.switchOnLights();a.PostItAll.destroy();c.preventDefault()}).append(a("<span />",{"class":"PIAdelyes"}).append(tjs.get("Delete all"))))).append(a("<div />",{"class":"PIAconfirmOpt"}).append(a("<a />",
{id:"cancel_"+c,href:"#"}).click(function(d){b.switchOnLights();a("#pia_editable_"+c).show();b.switchBackNoteOff("PIAflip2");d.preventDefault()}).append(a("<span />",{"class":"PIAdelno"}).append(tjs.get("Cancel"))))).append(a("<div />",{style:"line-height:10px;font-size:10px;font-weight: bold;clear:both;"}).append("<br/>"+tjs.get("This action cannot be undone!")))));return f},__getBPHideUntil:function(c){var d=this,b=d.options,e="";if(a.fn.postitall.globals.askOnHide&&b.features.askOnHide){e="<div id='PIAhideUntilNormal_"+
c+"'><div>For how long do you want to hide this note?</div>"+("<input type='text' id='numericIncrement_"+c+"' size=3 maxlength=2 value='30'>")+("&nbsp;<select id='selectedIncrement_"+c+"'><option>Seconds</option><option>Minutes</option><option>Hours</option><option>Days</option></select>")+"</div>";var f=a("<div />"),k="";f.append(e);a.ui&&(k=k+("<div id='PIAhideUntilDatePicker_"+c+"' style='display:none;'>")+"<div>The note will be displayed again on the following datetime : </div>",k=a.ui.timepicker?
k+("<input type='text' id='datepicker_"+c+"' placeholder='dd/mm/yyyy hh:mm'>"):k+("<input type='text' id='datepicker_"+c+"' size=11 placeholder='dd/mm/yyyy'>")+("&nbsp;<input type='textbox' placeholder='hh:mm' id='timepicker_"+c+"' size=6>"),f.append(k+"</div>").append(a("<label />").append(a("<input />",{id:"PIAhideUntilCB_"+c,type:"checkbox"}).click(function(b){a(this).is(":checked")?(a.ui.timepicker?a("#datepicker_"+c).datetimepicker({minDate:0,dateFormat:"yy-mm-dd",timeFormat:"HH:mm"}):a("#datepicker_"+
c).datepicker({minDate:0,dateFormat:"yy-mm-dd"}),a("#PIAhideUntilDatePicker_"+c).show(),a("#PIAhideUntilNormal_"+c).hide()):(a("#PIAhideUntilDatePicker_"+c).hide(),a("#PIAhideUntilNormal_"+c).show())})).append(" Datepicker")));e=a("<div />",{id:"idHideUntil_"+c,"class":"PIAcontent backContent_"+c}).append(a("<div />",{"class":"PIAinfoBox PIABox",height:b.height-40}).append("<div class='PIAtitle'>Hide note</div>").append(f).append(a("<span />",{id:"PIAhideUntilError_"+c})).append(a("<br />")).append(a("<button />",
{text:"Hide"}).click(function(e){var f=new Date,g=!1;if(a.ui&&a("#PIAhideUntilCB_"+c).is(":checked")){g=!0;f=(new Date).toString().match(/([-\+][0-9]+)\s/)[1];var k="";k=a.ui.timepicker?a("#datepicker_"+c).val():a("#datepicker_"+c).val()+" "+a("#timepicker_"+c).val();f=new Date(k+(" "+f))}if(!g)switch(g=parseInt(a("#numericIncrement_"+c).val(),10),0>g&&(g=1),99<g&&(g=99),a("#selectedIncrement_"+c).val()){case "Days":f=f.addDays(g);break;case "Hours":f=f.addHours(g);break;case "Minutes":f=f.addMinutes(g);
break;default:f=f.addSeconds(g)}isNaN(f)?(a("#PIAhideUntilError_"+c).css("color","red").html("Invalid date!").slideDown(),setTimeout(function(){a("#PIAhideUntilError_"+c).slideUp()},1E3)):(b.features.hideUntil=f,d.switchOnLights(),d.hide(c),d.saveOptions(b),d.showAgain(c,f));e.preventDefault()})).append(a("<button />",{text:"Cancel"}).click(function(b){d.switchOnLights();a("#pia_editable_"+c).show();d.switchBackNoteOff("PIAflip2");b.preventDefault()})))}return e},__getBPMetaData:function(c){var d=
this,b=d.options,e=!1;a.fn.postitall.globals.showInfo&&b.features.showInfo&&(e=!0);var g=!1;a.fn.postitall.globals.showMeta&&b.features.showMeta&&"undefined"!==typeof b.meta&&"object"===typeof b.meta&&(g=!0);if(!e&&!g)return"";if(e){var k=new Date(b.created),l=k.toLocaleDateString()+" ("+k.toLocaleTimeString()+")";k="";g||(k+="<div class='PIAtitle'>Note info</div>");k+="<strong>Id:</strong> "+a.fn.postitall.globals.prefix+c+"<br>";k+="<strong>Created on:</strong> "+l+"<br>";"object"===typeof b.domain&&
0<=b.domain.indexOf("http")&&(k+="<strong>Domain:</strong> "+b.domain+"<br>");k+="<strong>Page:</strong> "+b.page+"<br>";k+="<strong>Op.System:</strong> "+d.getOSName()+" - "+b.osname+"<br>"}if(g){var n=function(c,e,g){var h="";if("object"===typeof g&&g.type!==f){h=a("<div />");var k=function(c){var e=a(this);delay(function(){b.meta[e.attr("data-title")].value=e.val();d.setOptions(b,!0)},500)},l=null,m=g.value;c={name:"input_"+e+"_"+c,"data-title":e};g.maxlength!==f&&(c.maxlength=parseInt(g.maxlength,
10));g.size!==f&&(c.size=parseInt(g.size,10));g.placeholder!==f&&(c.placeholder=g.placeholder);switch(g.type){case "combo":l=a("<select />",c).keypress(k).change(k);a(g.values).each(function(b,c){a.each(this,function(b,c){var d={value:b};m!==f&&m===b&&(d.selected="selected");l.append(a("<option />",d).append(c))})});break;case "textarea":l=a("<textarea />",c).keypress(k).change(k).append(m);break;default:case "input":c.type="text",m!==f&&(c.value=m),l=a("<input />",c).keypress(k).change(k)}h.append(a("<label />").append(e).append(a("<br />")).append(l))}return h},
h=a("<div />",{"class":"meta-form"});a(b.meta).each(function(){a.each(this,function(a,b){h.append(n(c,a,b))})})}var m="";l="";e&&g?(l="PIApanelBox",m=a("<div />",{"class":"PIAtabs"}).append(a("<div />",{id:"PIAtab-1"+c,"class":"PIAtab"}).append(a("<span />").append(a("<a />",{id:"idPIAtab-1"+c}).click(function(){a("#PIAtab-1"+c).addClass("PIAtab_selected");a("#PIAtab-2"+c).removeClass("PIAtab_selected");a("#idPIApanel1"+c).show();a("#idPIApanel2"+c).hide()}).append("Note info"))).append(a("<span />",
{id:"idPIApanel1"+c,"class":"PIAinfoBox"}).append(k))).append(a("<div />",{id:"PIAtab-2"+c,"class":"PIAtab"}).append(a("<span />").append(a("<a />",{id:"idPIAtab-2"+c}).click(function(){a("#PIAtab-1"+c).removeClass("PIAtab_selected");a("#PIAtab-2"+c).addClass("PIAtab_selected");a("#idPIApanel1"+c).hide();a("#idPIApanel2"+c).show()}).append("Meta data"))).append(a("<span />",{id:"idPIApanel2"+c,"class":"PIAinfoBox"}).append(h)))):e?(l="PIAinfoBox",m=k):(l="PIAinfoBox",e=a("<div />",{"class":"PIAtitle"}).append("Meta data"),
m=h.prepend(e));return a("<div />",{id:"idBackInfo_"+c,"class":"PIAcontent backContent_"+c}).append(a("<div />",{"class":"PIABox "+l,height:b.height-40}).append(m))}};a.fn.drags=function(c){c=a.extend({handle:"",cursor:"move"},c);var d=this;""!==c.handle&&(d=this.find(c.handle));return d.css("cursor",c.cursor).on("mousedown",function(b){var d=""===c.handle?a(this).parent().parent().parent().addClass("draggable"):a(this).parent().parent().parent().addClass("active-handle").parent().addClass("draggable");
var f=d.data("PIA-options");if(!f.flags.minimized&&!f.flags.expand){var k=d.css("z-index"),l=d.outerHeight(),m=d.outerWidth(),h=d.offset().top+l-b.pageY,q=d.offset().left+m-b.pageX,r=function(b){d.addClass("PIAdragged");a(".draggable").offset({top:b.pageY+h-l,left:b.pageX+q-m}).on("mouseup",function(){a(this).removeClass("draggable").css("z-index",k)})};d.css("z-index",1E3).parents().on("mousemove",r).on("mouseup",function(){a(this).off("mousemove",r);delay(function(){d.removeClass("PIAdragged")},
200)});b.preventDefault()}}).on("mouseup",function(b){""===c.handle?(a(this).removeClass("draggable"),b=a(this).parent().parent().parent()):(a(this).removeClass("active-handle").parent().removeClass("draggable"),b=a(this).parent().parent().parent().parent());var d=b.data("PIA-options");d.right="";d.flags.minimized?d.oldPosition.leftMinimized=b.css("left"):(d.posY=b.css("top"),d.posX=b.css("left"),d.oldPosition.leftMinimized=f);a(a.fn.postitall.globals.prefix+d.id).postitall("save",d)})};var u=null,
t={add:function(a,d){this.loadManager(function(){u.add(a,function(a){null!=d&&d(a)})})},get:function(a,d){this.loadManager(function(){""!==a?u.get(a,function(a){null!=d&&d(a)}):null!=d&&d(null)})},getAll:function(a){this.loadManager(function(){u.getAll(function(c){null!=a&&a(c)})})},getByKey:function(a,d){this.loadManager(function(){null!=a&&"PostIt_"===a.slice(0,7)?(a=a.slice(7,a.length),""!==a?t.get(a,d):null!=d&&d(null)):null!=d&&d(null)})},remove:function(a,d){this.loadManager(function(){u.remove(a,
function(a){null!=d&&d()})})},removeDom:function(a,d){this.loadManager(function(){u.removeDom(a,function(){null!=d&&d()})})},clear:function(a,d){this.loadManager(function(){u.clear(function(){null!=d&&d()})})},getlength:function(a){this.loadManager(function(){u.getlength(function(c){null!=a&&a(c)})})},key:function(a,d){this.loadManager(function(){u.key(a,function(a){null!=d&&d(a)})})},view:function(a){this.loadManager(function(){u.view()})},loadManager:function(a){null===u?this.getStorageManager(function(c){u=
c;a(u)}):a(u)},getStorageManager:function(a){"undefined"!==typeof externalManager?a(externalManager):a(y)}},y={add:function(a,d){var b="PostIt_"+a.id.toString();a=JSON.stringify(a);q.setItem(b,a);null!=d&&d("")},get:function(a,d){a=q.getItem("PostIt_"+a.toString());a=null!=a?JSON.parse(a):"";null!=d&&d(a)},remove:function(a,d){q.removeItem("PostIt_"+a);null!=d&&d()},removeDom:function(a,d){this.clear(d)},clear:function(a){q.clear();null!=a&&a()},getlength:function(a){a(q.length)},key:function(a,d){a--;
a=q.key(a);d(a)},view:function(){},getAll:function(a){}};a(m).ready(function(){a.PostItAll.__initialize()})})(jQuery,window.localStorage,window,document);
