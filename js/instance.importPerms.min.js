(function(e){e.fn.importPerms=function(d,f){var a=e.extend({a:"",id:"",block:this},d),c=a.block;if(a.id&&0!==a.id.length){(d="index.php?controller=ajax&action=importInstanceData",""!==d)||(d=document.location.href.match(/^([^#]+)/)[1]);a={a:a.a,id:a.id};var g=(new Date).getTime();e.ajax({url:d,dataType:"json",type:"POST",data:a,success:function(b,a,d){b.valid?(b=(new Date).getTime(),500>b-g?setTimeout(function(){c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Import successfully"),
{type:"success",position:"top"})},500-(b-g)):c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Import successfully"),{type:"success",position:"top"}),"function"===typeof f&&f.call(c)):b.error?c.removeBlockMessages({except:"table-message"}).blockMessage(b.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):b.warning&&c.removeBlockMessages({except:"table-message"}).blockMessage(b.warning||tjs.get("An unexpected error occurred, please try again"),
{type:"warning",position:"top"})},error:function(b,a,d){c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get(tjs.get("Error while contacting server, please try again")),{type:"error",position:"top"})}});c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Please wait, import is running..."),{type:"loading",position:"top"})}else c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top"})}})(jQuery);
