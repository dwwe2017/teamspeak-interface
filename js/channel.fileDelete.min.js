(function(e){e.fn.fileDelete=function(d,f){var a=e.extend({a:"",id:"",sid:"",cid:"",fkey:"",noMargin:!0},d),b=this;if(a.id&&0!==a.id.length)if(a.sid&&0!==a.sid.length)if(a.cid&&0!==a.cid.length)if(a.fkey&&0!==a.fkey.length){(d="index.php?controller=ajax&action=fileDelete",""!==d)||(d=document.location.href.match(/^([^#]+)/)[1]);var h={a:a.a,id:a.id,sid:a.sid,cid:a.cid,fkey:a.fkey},g=(new Date).getTime();e.ajax({url:d,dataType:"json",type:"POST",data:h,success:function(c,d,e){c.valid?(c=(new Date).getTime(),
500>c-g?setTimeout(function(){b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("File successfully deleted"),{type:"success",position:"top",noMargin:a.noMargin})},500-(c-g)):b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("File successfully deleted"),{type:"success",position:"top",noMargin:a.noMargin}),"function"===typeof f&&f.call(b)):c.error?b.removeBlockMessages({except:"no-hide"}).blockMessage(c.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",
position:"top",noMargin:a.noMargin}):c.warning&&b.removeBlockMessages({except:"no-hide"}).blockMessage(c.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:a.noMargin})},error:function(c,d,e){b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top",noMargin:a.noMargin})}});b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, processing..."),
{type:"loading",position:"top",noMargin:a.noMargin})}else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Filekey is missing"),{type:"warning",position:"top",noMargin:a.noMargin});else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Channel id is missing"),{type:"warning",position:"top",noMargin:a.noMargin});else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Virtual server id is missing"),{type:"warning",position:"top",noMargin:a.noMargin});else b.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Entity id is missing"),
{type:"warning",position:"top",noMargin:a.noMargin})}})(jQuery);
