(function(e){e.fn.tsiDeleteIcon=function(c,f){var a=e.extend({a:"",element:this,form:this.parents("form"),file:this.attr("data-id"),noMargin:!0},c),d=a.form,h=a.element;(c="index.php?controller=ajax&action=tsiDeleteIcon",""!==c)||(c=document.location.href.match(/^([^#]+)/)[1]);var k={a:a.a,file:a.file},g=(new Date).getTime();e.ajax({url:c,dataType:"json",type:"POST",data:k,success:function(b,c,e){b.valid?(b=(new Date).getTime(),500>b-g?setTimeout(function(){d.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Icon successfully deleted"),
{type:"success",position:"top",noMargin:a.noMargin})},500-(b-g)):d.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Icon successfully deleted"),{type:"success",position:"top",noMargin:a.noMargin}),"function"===typeof f&&f.call(h)):b.error?d.removeBlockMessages({except:"no-hide"}).blockMessage(b.error||tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top",noMargin:a.noMargin}):b.warning&&d.removeBlockMessages({except:"no-hide"}).blockMessage(b.warning||
tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top",noMargin:a.noMargin})},error:function(b,c,e){d.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top",noMargin:a.noMargin})}});d.removeBlockMessages({except:"no-hide"}).blockMessage(tjs.get("Please wait, sending data to server..."),{type:"loading",position:"top",noMargin:a.noMargin})}})(jQuery);
