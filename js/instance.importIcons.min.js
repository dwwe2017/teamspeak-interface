(function(d){d.fn.instanceImportIcons=function(e,f){var b=d.extend({a:"",id:"",block:this},e),c=b.block;if(b.id&&0!==b.id.length){(e="index.php?controller=ajax&action=importInstanceIcons",""!==e)||(e=document.location.href.match(/^([^#]+)/)[1]);b={a:b.a,id:b.id};var g=(new Date).getTime();d.ajax({url:e,dataType:"json",type:"POST",data:b,success:function(a,b,e){if(a.valid){var d=1!==a.imports?a.imports+" "+tjs.get("icons")+"":"1 "+tjs.get("icon")+"",h=1!==a.fails?a.fails+" "+tjs.get("icons")+"":"1 "+
tjs.get("icon")+"";a=(new Date).getTime();500>a-g?setTimeout(function(){c.removeBlockMessages({except:"table-message"}).blockMessage(d+" "+tjs.get("successfully imported")+" / "+h+" "+tjs.get("not found"),{type:"success",position:"top"})},500-(a-g)):c.removeBlockMessages({except:"table-message"}).blockMessage(d+" "+tjs.get("successfully imported")+" / "+h+" "+tjs.get("not found"),{type:"success",position:"top"});"function"===typeof f&&f.call(c)}else a.error?c.removeBlockMessages({except:"table-message"}).blockMessage(a.error||
tjs.get("An unexpected error occurred, please try again"),{type:"error",position:"top"}):a.warning&&c.removeBlockMessages({except:"table-message"}).blockMessage(a.warning||tjs.get("An unexpected error occurred, please try again"),{type:"warning",position:"top"})},error:function(a,b,d){c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Error while contacting server, please try again"),{type:"error",position:"top"})}});c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Please wait, importing icons..."),
{type:"loading",position:"top"})}else c.removeBlockMessages({except:"table-message"}).blockMessage(tjs.get("Entity id is missing"),{type:"warning",position:"top"})}})(jQuery);
